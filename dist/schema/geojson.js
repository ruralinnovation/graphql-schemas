"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const graphql_1 = require("graphql");
function coerceCoordinates(value) {
    return value;
}
function parseCoordinates(valueAST) {
    return valueAST.value;
}
function coerceObject(value) {
    try {
        return JSON.parse(value);
    }
    catch (err) {
        return value;
    }
}
function parseObject(valueAST) {
    return JSON.stringify(valueAST.value);
}
const GeoJSON = {
    TypeEnum: new graphql_1.GraphQLEnumType({
        name: 'GeoJSONType',
        description: 'Enumeration of all GeoJSON object types.',
        values: {
            Point: { value: 'Point' },
            MultiPoint: { value: 'MultiPoint' },
            LineString: { value: 'LineString' },
            MultiLineString: { value: 'MultiLineString' },
            Polygon: { value: 'Polygon' },
            MultiPolygon: { value: 'MultiPolygon' },
            GeometryCollection: { value: 'GeometryCollection' },
            Feature: { value: 'Feature' },
            FeatureCollection: { value: 'FeatureCollection' },
        },
    }),
    CoordinatesScalar: new graphql_1.GraphQLScalarType({
        name: 'GeoJSONCoordinates',
        description: 'A (multidimensional) set of coordinates following x, y, z order.',
        serialize: coerceCoordinates,
        parseValue: coerceCoordinates,
        parseLiteral: parseCoordinates,
    }),
    JsonScalar: new graphql_1.GraphQLScalarType({
        name: 'JSONObject',
        description: 'Arbitrary JSON value',
        serialize: coerceObject,
        parseValue: coerceObject,
        parseLiteral: parseObject,
    }),
    PointObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONPoint',
        description: 'Object describing a single geographical point.',
        interfaces: () => [GeoJSON.GeoJSONInterface, GeoJSON.GeometryInterface],
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            coordinates: { type: GeoJSON.CoordinatesScalar },
        }),
    }),
    MultiPointObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONMultiPoint',
        description: 'Object describing multiple geographical points.',
        interfaces: () => [GeoJSON.GeoJSONInterface, GeoJSON.GeometryInterface],
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            coordinates: { type: GeoJSON.CoordinatesScalar },
        }),
    }),
    LineStringObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONLineString',
        description: 'Object describing a single connected sequence of geographical points.',
        interfaces: () => [GeoJSON.GeoJSONInterface, GeoJSON.GeometryInterface],
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            coordinates: { type: GeoJSON.CoordinatesScalar },
        }),
    }),
    MultiLineStringObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONMultiLineString',
        description: 'Object describing multiple connected sequences of geographical points.',
        interfaces: () => [GeoJSON.GeoJSONInterface, GeoJSON.GeometryInterface],
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            coordinates: { type: GeoJSON.CoordinatesScalar },
        }),
    }),
    PolygonObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONPolygon',
        description: 'Object describing a single shape formed by a set of geographical points.',
        interfaces: () => [GeoJSON.GeoJSONInterface, GeoJSON.GeometryInterface],
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            coordinates: { type: GeoJSON.CoordinatesScalar },
        }),
    }),
    MultiPolygonObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONMultiPolygon',
        description: 'Object describing multiple shapes formed by sets of geographical points.',
        interfaces: () => [GeoJSON.GeoJSONInterface, GeoJSON.GeometryInterface],
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            coordinates: { type: GeoJSON.CoordinatesScalar },
        }),
    }),
    GeometryCollectionObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONGeometryCollection',
        description: 'A set of multiple geometries, possibly of various types.',
        interfaces: () => [GeoJSON.GeoJSONInterface],
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            geometries: { type: new graphql_1.GraphQLNonNull(new graphql_1.GraphQLList(new graphql_1.GraphQLNonNull(GeoJSON.GeometryInterface))) },
        }),
    }),
    FeatureObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONFeature',
        description: 'An object that links a geometry to properties in order to provide context.',
        interfaces: () => [GeoJSON.GeoJSONInterface],
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            geometry: { type: GeoJSON.GeometryInterface },
            properties: { type: GeoJSON.JsonScalar },
            id: { type: graphql_1.GraphQLString },
        }),
    }),
    FeatureCollectionObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONFeatureCollection',
        description: 'A set of multiple features.',
        interfaces: () => [GeoJSON.GeoJSONInterface],
        fields: () => ({
            // id: { type: Str },
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            features: { type: new graphql_1.GraphQLNonNull(new graphql_1.GraphQLList(new graphql_1.GraphQLNonNull(GeoJSON.FeatureObject))) },
        }),
    }),
    CRSTypeEnum: new graphql_1.GraphQLEnumType({
        name: 'GeoJSONCRSType',
        description: 'Enumeration of all GeoJSON CRS object types.',
        values: {
            name: { value: 'name' },
            link: { value: 'link' },
        },
    }),
    NamedCRSPropertiesObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONNamedCRSProperties',
        description: 'Properties for name based CRS object.',
        fields: () => ({
            name: { type: new graphql_1.GraphQLNonNull(graphql_1.GraphQLString) },
        }),
    }),
    LinkedCRSPropertiesObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONLinkedCRSProperties',
        description: 'Properties for link based CRS object.',
        fields: () => ({
            href: { type: new graphql_1.GraphQLNonNull(graphql_1.GraphQLString) },
            type: { type: graphql_1.GraphQLString },
        }),
    }),
    CRSPropertiesUnion: new graphql_1.GraphQLUnionType({
        name: 'GeoJSONCRSProperties',
        description: 'CRS object properties.',
        types: () => [GeoJSON.NamedCRSPropertiesObject, GeoJSON.LinkedCRSPropertiesObject],
        resolveType: value => {
            if (value.name) {
                return GeoJSON.NamedCRSPropertiesObject;
            }
            if (value.href) {
                return GeoJSON.LinkedCRSPropertiesObject;
            }
        },
    }),
    CoordinateReferenceSystemObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONCoordinateReferenceSystem',
        description: 'Coordinate Reference System (CRS) object.',
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.CRSTypeEnum) },
            properties: { type: new graphql_1.GraphQLNonNull(GeoJSON.CRSPropertiesUnion) },
        }),
    }),
    GeoJSONInterface: new graphql_1.GraphQLInterfaceType({
        name: 'GeoJSONInterface',
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
        }),
        resolveType: value => GeoJSON[`${value.type}Object`],
    }),
    GeometryInterface: new graphql_1.GraphQLInterfaceType({
        name: 'GeoJSONGeometryInterface',
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            coordinates: { type: GeoJSON.CoordinatesScalar },
        }),
        resolveType: value => GeoJSON[`${value.type}Object`].name,
        // resolveType: value => value.type,
    }),
    /**
     *     name: 'GeoJSONType',
      description: 'Enumeration of all GeoJSON object types.',
      values: {
        Point: { value: 'Point' },
        MultiPoint: { value: 'MultiPoint' },
        LineString: { value: 'LineString' },
        MultiLineString: { value: 'MultiLineString' },
        Polygon: { value: 'Polygon' },
        MultiPolygon: { value: 'MultiPolygon' },
        GeometryCollection: { value: 'GeometryCollection' },
        Feature: { value: 'Feature' },
        FeatureCollection: { value: 'FeatureCollection' },
      },
    }),
     */
    GeometryTypeUnion: new graphql_1.GraphQLUnionType({
        name: 'GeoJSONGeometryTypes',
        description: 'Geometry Types',
        types: () => [
            GeoJSON.PointObject,
            GeoJSON.MultiLineStringObject,
            GeoJSON.LineStringObject,
            GeoJSON.PolygonObject,
            GeoJSON.MultiPointObject,
            GeoJSON.MultiPolygonObject,
        ],
        resolveType: value => {
            if (value.value === GeoJSON.TypeEnum.Point.value) {
                return GeoJSON.PointObject.name;
            }
            if (value.value === GeoJSON.TypeEnum.MultiLineString.value) {
                return GeoJSON.MultiLineStringObject.name;
            }
            if (value.value === GeoJSON.TypeEnum.LineString.value) {
                return GeoJSON.LineStringObject.name;
            }
            if (value.value === GeoJSON.TypeEnum.MultiPoint.value) {
                return GeoJSON.MultiPointObject.name;
            }
            if (value.value === GeoJSON.TypeEnum.Polygon.value) {
                return GeoJSON.PolygonObject.name;
            }
            if (value.value === GeoJSON.TypeEnum.MultiPolygon.value) {
                return GeoJSON.MultiPolygonObject.name;
            }
            if (value.value === GeoJSON.TypeEnum.MultiPoint.value) {
                return GeoJSON.MultiPointObject.name;
            }
        },
    }),
};
exports.default = GeoJSON;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VvanNvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NjaGVtYS9nZW9qc29uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEscUNBVWlCO0FBRWpCLFNBQVMsaUJBQWlCLENBQUMsS0FBSztJQUM5QixPQUFPLEtBQUssQ0FBQztBQUNmLENBQUM7QUFFRCxTQUFTLGdCQUFnQixDQUFDLFFBQVE7SUFDaEMsT0FBTyxRQUFRLENBQUMsS0FBSyxDQUFDO0FBQ3hCLENBQUM7QUFFRCxTQUFTLFlBQVksQ0FBQyxLQUFLO0lBQ3pCLElBQUksQ0FBQztRQUNILE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMzQixDQUFDO0lBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQztRQUNiLE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQztBQUNILENBQUM7QUFFRCxTQUFTLFdBQVcsQ0FBQyxRQUFRO0lBQzNCLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDeEMsQ0FBQztBQUVELE1BQU0sT0FBTyxHQUFHO0lBQ2QsUUFBUSxFQUFFLElBQUkseUJBQVEsQ0FBQztRQUNyQixJQUFJLEVBQUUsYUFBYTtRQUNuQixXQUFXLEVBQUUsMENBQTBDO1FBQ3ZELE1BQU0sRUFBRTtZQUNOLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUU7WUFDekIsVUFBVSxFQUFFLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRTtZQUNuQyxVQUFVLEVBQUUsRUFBRSxLQUFLLEVBQUUsWUFBWSxFQUFFO1lBQ25DLGVBQWUsRUFBRSxFQUFFLEtBQUssRUFBRSxpQkFBaUIsRUFBRTtZQUM3QyxPQUFPLEVBQUUsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFO1lBQzdCLFlBQVksRUFBRSxFQUFFLEtBQUssRUFBRSxjQUFjLEVBQUU7WUFDdkMsa0JBQWtCLEVBQUUsRUFBRSxLQUFLLEVBQUUsb0JBQW9CLEVBQUU7WUFDbkQsT0FBTyxFQUFFLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRTtZQUM3QixpQkFBaUIsRUFBRSxFQUFFLEtBQUssRUFBRSxtQkFBbUIsRUFBRTtTQUNsRDtLQUNGLENBQUM7SUFFRixpQkFBaUIsRUFBRSxJQUFJLDJCQUFVLENBQUM7UUFDaEMsSUFBSSxFQUFFLG9CQUFvQjtRQUMxQixXQUFXLEVBQUUsa0VBQWtFO1FBQy9FLFNBQVMsRUFBRSxpQkFBaUI7UUFDNUIsVUFBVSxFQUFFLGlCQUFpQjtRQUM3QixZQUFZLEVBQUUsZ0JBQWdCO0tBQy9CLENBQUM7SUFFRixVQUFVLEVBQUUsSUFBSSwyQkFBVSxDQUFDO1FBQ3pCLElBQUksRUFBRSxZQUFZO1FBQ2xCLFdBQVcsRUFBRSxzQkFBc0I7UUFDbkMsU0FBUyxFQUFFLFlBQVk7UUFDdkIsVUFBVSxFQUFFLFlBQVk7UUFDeEIsWUFBWSxFQUFFLFdBQVc7S0FDMUIsQ0FBQztJQUVGLFdBQVcsRUFBRSxJQUFJLDJCQUFVLENBQUM7UUFDMUIsSUFBSSxFQUFFLGNBQWM7UUFDcEIsV0FBVyxFQUFFLGdEQUFnRDtRQUM3RCxVQUFVLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLEVBQUUsT0FBTyxDQUFDLGlCQUFpQixDQUFDO1FBQ3ZFLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQ2IsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksd0JBQU8sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDN0MsR0FBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQywrQkFBK0IsRUFBRTtZQUN0RCxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxxQkFBSSxDQUFDLHNCQUFLLENBQUMsRUFBRTtZQUMvQixXQUFXLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLGlCQUFpQixFQUFFO1NBQ2pELENBQUM7S0FDSCxDQUFDO0lBRUYsZ0JBQWdCLEVBQUUsSUFBSSwyQkFBVSxDQUFDO1FBQy9CLElBQUksRUFBRSxtQkFBbUI7UUFDekIsV0FBVyxFQUFFLGlEQUFpRDtRQUM5RCxVQUFVLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLEVBQUUsT0FBTyxDQUFDLGlCQUFpQixDQUFDO1FBQ3ZFLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQ2IsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksd0JBQU8sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDN0MsR0FBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQywrQkFBK0IsRUFBRTtZQUN0RCxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxxQkFBSSxDQUFDLHNCQUFLLENBQUMsRUFBRTtZQUMvQixXQUFXLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLGlCQUFpQixFQUFFO1NBQ2pELENBQUM7S0FDSCxDQUFDO0lBRUYsZ0JBQWdCLEVBQUUsSUFBSSwyQkFBVSxDQUFDO1FBQy9CLElBQUksRUFBRSxtQkFBbUI7UUFDekIsV0FBVyxFQUFFLHVFQUF1RTtRQUNwRixVQUFVLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLEVBQUUsT0FBTyxDQUFDLGlCQUFpQixDQUFDO1FBQ3ZFLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQ2IsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksd0JBQU8sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDN0MsR0FBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQywrQkFBK0IsRUFBRTtZQUN0RCxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxxQkFBSSxDQUFDLHNCQUFLLENBQUMsRUFBRTtZQUMvQixXQUFXLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLGlCQUFpQixFQUFFO1NBQ2pELENBQUM7S0FDSCxDQUFDO0lBRUYscUJBQXFCLEVBQUUsSUFBSSwyQkFBVSxDQUFDO1FBQ3BDLElBQUksRUFBRSx3QkFBd0I7UUFDOUIsV0FBVyxFQUFFLHdFQUF3RTtRQUNyRixVQUFVLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLEVBQUUsT0FBTyxDQUFDLGlCQUFpQixDQUFDO1FBQ3ZFLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQ2IsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksd0JBQU8sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDN0MsR0FBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQywrQkFBK0IsRUFBRTtZQUN0RCxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxxQkFBSSxDQUFDLHNCQUFLLENBQUMsRUFBRTtZQUMvQixXQUFXLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLGlCQUFpQixFQUFFO1NBQ2pELENBQUM7S0FDSCxDQUFDO0lBRUYsYUFBYSxFQUFFLElBQUksMkJBQVUsQ0FBQztRQUM1QixJQUFJLEVBQUUsZ0JBQWdCO1FBQ3RCLFdBQVcsRUFBRSwwRUFBMEU7UUFDdkYsVUFBVSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLGdCQUFnQixFQUFFLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztRQUN2RSxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztZQUNiLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLHdCQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQzdDLEdBQUcsRUFBRSxFQUFFLElBQUksRUFBRSxPQUFPLENBQUMsK0JBQStCLEVBQUU7WUFDdEQsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUkscUJBQUksQ0FBQyxzQkFBSyxDQUFDLEVBQUU7WUFDL0IsV0FBVyxFQUFFLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQyxpQkFBaUIsRUFBRTtTQUNqRCxDQUFDO0tBQ0gsQ0FBQztJQUVGLGtCQUFrQixFQUFFLElBQUksMkJBQVUsQ0FBQztRQUNqQyxJQUFJLEVBQUUscUJBQXFCO1FBQzNCLFdBQVcsRUFBRSwwRUFBMEU7UUFDdkYsVUFBVSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLGdCQUFnQixFQUFFLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztRQUN2RSxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztZQUNiLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLHdCQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQzdDLEdBQUcsRUFBRSxFQUFFLElBQUksRUFBRSxPQUFPLENBQUMsK0JBQStCLEVBQUU7WUFDdEQsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUkscUJBQUksQ0FBQyxzQkFBSyxDQUFDLEVBQUU7WUFDL0IsV0FBVyxFQUFFLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQyxpQkFBaUIsRUFBRTtTQUNqRCxDQUFDO0tBQ0gsQ0FBQztJQUVGLHdCQUF3QixFQUFFLElBQUksMkJBQVUsQ0FBQztRQUN2QyxJQUFJLEVBQUUsMkJBQTJCO1FBQ2pDLFdBQVcsRUFBRSwwREFBMEQ7UUFDdkUsVUFBVSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDO1FBQzVDLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQ2IsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksd0JBQU8sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDN0MsR0FBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQywrQkFBK0IsRUFBRTtZQUN0RCxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxxQkFBSSxDQUFDLHNCQUFLLENBQUMsRUFBRTtZQUMvQixVQUFVLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSx3QkFBTyxDQUFDLElBQUkscUJBQUksQ0FBQyxJQUFJLHdCQUFPLENBQUMsT0FBTyxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxFQUFFO1NBQ3BGLENBQUM7S0FDSCxDQUFDO0lBRUYsYUFBYSxFQUFFLElBQUksMkJBQVUsQ0FBQztRQUM1QixJQUFJLEVBQUUsZ0JBQWdCO1FBQ3RCLFdBQVcsRUFBRSw0RUFBNEU7UUFDekYsVUFBVSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDO1FBQzVDLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQ2IsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksd0JBQU8sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDN0MsR0FBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQywrQkFBK0IsRUFBRTtZQUN0RCxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxxQkFBSSxDQUFDLHNCQUFLLENBQUMsRUFBRTtZQUMvQixRQUFRLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLGlCQUFpQixFQUFFO1lBQzdDLFVBQVUsRUFBRSxFQUFFLElBQUksRUFBRSxPQUFPLENBQUMsVUFBVSxFQUFFO1lBQ3hDLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSx1QkFBRyxFQUFFO1NBQ2xCLENBQUM7S0FDSCxDQUFDO0lBRUYsdUJBQXVCLEVBQUUsSUFBSSwyQkFBVSxDQUFDO1FBQ3RDLElBQUksRUFBRSwwQkFBMEI7UUFDaEMsV0FBVyxFQUFFLDZCQUE2QjtRQUMxQyxVQUFVLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUM7UUFDNUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7WUFDYixxQkFBcUI7WUFDckIsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksd0JBQU8sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDN0MsR0FBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQywrQkFBK0IsRUFBRTtZQUN0RCxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxxQkFBSSxDQUFDLHNCQUFLLENBQUMsRUFBRTtZQUMvQixRQUFRLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSx3QkFBTyxDQUFDLElBQUkscUJBQUksQ0FBQyxJQUFJLHdCQUFPLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsRUFBRTtTQUM5RSxDQUFDO0tBQ0gsQ0FBQztJQUVGLFdBQVcsRUFBRSxJQUFJLHlCQUFRLENBQUM7UUFDeEIsSUFBSSxFQUFFLGdCQUFnQjtRQUN0QixXQUFXLEVBQUUsOENBQThDO1FBQzNELE1BQU0sRUFBRTtZQUNOLElBQUksRUFBRSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUU7WUFDdkIsSUFBSSxFQUFFLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRTtTQUN4QjtLQUNGLENBQUM7SUFFRix3QkFBd0IsRUFBRSxJQUFJLDJCQUFVLENBQUM7UUFDdkMsSUFBSSxFQUFFLDJCQUEyQjtRQUNqQyxXQUFXLEVBQUUsdUNBQXVDO1FBQ3BELE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQ2IsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksd0JBQU8sQ0FBQyx1QkFBRyxDQUFDLEVBQUU7U0FDakMsQ0FBQztLQUNILENBQUM7SUFFRix5QkFBeUIsRUFBRSxJQUFJLDJCQUFVLENBQUM7UUFDeEMsSUFBSSxFQUFFLDRCQUE0QjtRQUNsQyxXQUFXLEVBQUUsdUNBQXVDO1FBQ3BELE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQ2IsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksd0JBQU8sQ0FBQyx1QkFBRyxDQUFDLEVBQUU7WUFDaEMsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLHVCQUFHLEVBQUU7U0FDcEIsQ0FBQztLQUNILENBQUM7SUFFRixrQkFBa0IsRUFBRSxJQUFJLDBCQUFTLENBQUM7UUFDaEMsSUFBSSxFQUFFLHNCQUFzQjtRQUM1QixXQUFXLEVBQUUsd0JBQXdCO1FBQ3JDLEtBQUssRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyx3QkFBd0IsRUFBRSxPQUFPLENBQUMseUJBQXlCLENBQUM7UUFDbEYsV0FBVyxFQUFFLEtBQUssQ0FBQyxFQUFFO1lBQ25CLElBQUksS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO2dCQUNmLE9BQU8sT0FBTyxDQUFDLHdCQUF3QixDQUFDO1lBQzFDLENBQUM7WUFDRCxJQUFJLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQztnQkFDZixPQUFPLE9BQU8sQ0FBQyx5QkFBeUIsQ0FBQztZQUMzQyxDQUFDO1FBQ0gsQ0FBQztLQUNGLENBQUM7SUFFRiwrQkFBK0IsRUFBRSxJQUFJLDJCQUFVLENBQUM7UUFDOUMsSUFBSSxFQUFFLGtDQUFrQztRQUN4QyxXQUFXLEVBQUUsMkNBQTJDO1FBQ3hELE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQ2IsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksd0JBQU8sQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFDaEQsVUFBVSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksd0JBQU8sQ0FBQyxPQUFPLENBQUMsa0JBQWtCLENBQUMsRUFBRTtTQUM5RCxDQUFDO0tBQ0gsQ0FBQztJQUVGLGdCQUFnQixFQUFFLElBQUksOEJBQWEsQ0FBQztRQUNsQyxJQUFJLEVBQUUsa0JBQWtCO1FBQ3hCLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQ2IsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksd0JBQU8sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDN0MsR0FBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQywrQkFBK0IsRUFBRTtZQUN0RCxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxxQkFBSSxDQUFDLHNCQUFLLENBQUMsRUFBRTtTQUNoQyxDQUFDO1FBQ0YsV0FBVyxFQUFFLEtBQUssQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksUUFBUSxDQUFDO0tBQ3JELENBQUM7SUFFRixpQkFBaUIsRUFBRSxJQUFJLDhCQUFhLENBQUM7UUFDbkMsSUFBSSxFQUFFLDBCQUEwQjtRQUNoQyxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztZQUNiLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLHdCQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQzdDLEdBQUcsRUFBRSxFQUFFLElBQUksRUFBRSxPQUFPLENBQUMsK0JBQStCLEVBQUU7WUFDdEQsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUkscUJBQUksQ0FBQyxzQkFBSyxDQUFDLEVBQUU7WUFDL0IsV0FBVyxFQUFFLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQyxpQkFBaUIsRUFBRTtTQUNqRCxDQUFDO1FBQ0YsV0FBVyxFQUFFLEtBQUssQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksUUFBUSxDQUFDLENBQUMsSUFBSTtRQUN6RCxvQ0FBb0M7S0FDckMsQ0FBQztJQUVGOzs7Ozs7Ozs7Ozs7Ozs7T0FlRztJQUNILGlCQUFpQixFQUFFLElBQUksMEJBQVMsQ0FBQztRQUMvQixJQUFJLEVBQUUsc0JBQXNCO1FBQzVCLFdBQVcsRUFBRSxnQkFBZ0I7UUFDN0IsS0FBSyxFQUFFLEdBQUcsRUFBRSxDQUFDO1lBQ1gsT0FBTyxDQUFDLFdBQVc7WUFDbkIsT0FBTyxDQUFDLHFCQUFxQjtZQUM3QixPQUFPLENBQUMsZ0JBQWdCO1lBQ3hCLE9BQU8sQ0FBQyxhQUFhO1lBQ3JCLE9BQU8sQ0FBQyxnQkFBZ0I7WUFDeEIsT0FBTyxDQUFDLGtCQUFrQjtTQUMzQjtRQUNELFdBQVcsRUFBRSxLQUFLLENBQUMsRUFBRTtZQUNuQixJQUFJLEtBQUssQ0FBQyxLQUFLLEtBQUssT0FBTyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQ2pELE9BQU8sT0FBTyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUM7WUFDbEMsQ0FBQztZQUNELElBQUksS0FBSyxDQUFDLEtBQUssS0FBSyxPQUFPLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztnQkFDM0QsT0FBTyxPQUFPLENBQUMscUJBQXFCLENBQUMsSUFBSSxDQUFDO1lBQzVDLENBQUM7WUFDRCxJQUFJLEtBQUssQ0FBQyxLQUFLLEtBQUssT0FBTyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQ3RELE9BQU8sT0FBTyxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQztZQUN2QyxDQUFDO1lBQ0QsSUFBSSxLQUFLLENBQUMsS0FBSyxLQUFLLE9BQU8sQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUN0RCxPQUFPLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUM7WUFDdkMsQ0FBQztZQUNELElBQUksS0FBSyxDQUFDLEtBQUssS0FBSyxPQUFPLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQztnQkFDbkQsT0FBTyxPQUFPLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQztZQUNwQyxDQUFDO1lBQ0QsSUFBSSxLQUFLLENBQUMsS0FBSyxLQUFLLE9BQU8sQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUN4RCxPQUFPLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUM7WUFDekMsQ0FBQztZQUNELElBQUksS0FBSyxDQUFDLEtBQUssS0FBSyxPQUFPLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztnQkFDdEQsT0FBTyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDO1lBQ3ZDLENBQUM7UUFDSCxDQUFDO0tBQ0YsQ0FBQztDQUNILENBQUM7QUFFRixrQkFBZSxPQUFPLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBHcmFwaFFMU3RyaW5nIGFzIFN0cixcbiAgR3JhcGhRTExpc3QgYXMgTGlzdCxcbiAgR3JhcGhRTEVudW1UeXBlIGFzIEVudW1UeXBlLFxuICBHcmFwaFFMT2JqZWN0VHlwZSBhcyBPYmplY3RUeXBlLFxuICBHcmFwaFFMU2NhbGFyVHlwZSBhcyBTY2FsYXJUeXBlLFxuICBHcmFwaFFMSW50ZXJmYWNlVHlwZSBhcyBJbnRlcmZhY2VUeXBlLFxuICBHcmFwaFFMVW5pb25UeXBlIGFzIFVuaW9uVHlwZSxcbiAgR3JhcGhRTE5vbk51bGwgYXMgTm9uTnVsbCxcbiAgR3JhcGhRTEZsb2F0IGFzIEZsb2F0LFxufSBmcm9tICdncmFwaHFsJztcblxuZnVuY3Rpb24gY29lcmNlQ29vcmRpbmF0ZXModmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiBwYXJzZUNvb3JkaW5hdGVzKHZhbHVlQVNUKSB7XG4gIHJldHVybiB2YWx1ZUFTVC52YWx1ZTtcbn1cblxuZnVuY3Rpb24gY29lcmNlT2JqZWN0KHZhbHVlKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFyc2VPYmplY3QodmFsdWVBU1QpIHtcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlQVNULnZhbHVlKTtcbn1cblxuY29uc3QgR2VvSlNPTiA9IHtcbiAgVHlwZUVudW06IG5ldyBFbnVtVHlwZSh7XG4gICAgbmFtZTogJ0dlb0pTT05UeXBlJyxcbiAgICBkZXNjcmlwdGlvbjogJ0VudW1lcmF0aW9uIG9mIGFsbCBHZW9KU09OIG9iamVjdCB0eXBlcy4nLFxuICAgIHZhbHVlczoge1xuICAgICAgUG9pbnQ6IHsgdmFsdWU6ICdQb2ludCcgfSxcbiAgICAgIE11bHRpUG9pbnQ6IHsgdmFsdWU6ICdNdWx0aVBvaW50JyB9LFxuICAgICAgTGluZVN0cmluZzogeyB2YWx1ZTogJ0xpbmVTdHJpbmcnIH0sXG4gICAgICBNdWx0aUxpbmVTdHJpbmc6IHsgdmFsdWU6ICdNdWx0aUxpbmVTdHJpbmcnIH0sXG4gICAgICBQb2x5Z29uOiB7IHZhbHVlOiAnUG9seWdvbicgfSxcbiAgICAgIE11bHRpUG9seWdvbjogeyB2YWx1ZTogJ011bHRpUG9seWdvbicgfSxcbiAgICAgIEdlb21ldHJ5Q29sbGVjdGlvbjogeyB2YWx1ZTogJ0dlb21ldHJ5Q29sbGVjdGlvbicgfSxcbiAgICAgIEZlYXR1cmU6IHsgdmFsdWU6ICdGZWF0dXJlJyB9LFxuICAgICAgRmVhdHVyZUNvbGxlY3Rpb246IHsgdmFsdWU6ICdGZWF0dXJlQ29sbGVjdGlvbicgfSxcbiAgICB9LFxuICB9KSxcblxuICBDb29yZGluYXRlc1NjYWxhcjogbmV3IFNjYWxhclR5cGUoe1xuICAgIG5hbWU6ICdHZW9KU09OQ29vcmRpbmF0ZXMnLFxuICAgIGRlc2NyaXB0aW9uOiAnQSAobXVsdGlkaW1lbnNpb25hbCkgc2V0IG9mIGNvb3JkaW5hdGVzIGZvbGxvd2luZyB4LCB5LCB6IG9yZGVyLicsXG4gICAgc2VyaWFsaXplOiBjb2VyY2VDb29yZGluYXRlcyxcbiAgICBwYXJzZVZhbHVlOiBjb2VyY2VDb29yZGluYXRlcyxcbiAgICBwYXJzZUxpdGVyYWw6IHBhcnNlQ29vcmRpbmF0ZXMsXG4gIH0pLFxuXG4gIEpzb25TY2FsYXI6IG5ldyBTY2FsYXJUeXBlKHtcbiAgICBuYW1lOiAnSlNPTk9iamVjdCcsXG4gICAgZGVzY3JpcHRpb246ICdBcmJpdHJhcnkgSlNPTiB2YWx1ZScsXG4gICAgc2VyaWFsaXplOiBjb2VyY2VPYmplY3QsXG4gICAgcGFyc2VWYWx1ZTogY29lcmNlT2JqZWN0LFxuICAgIHBhcnNlTGl0ZXJhbDogcGFyc2VPYmplY3QsXG4gIH0pLFxuXG4gIFBvaW50T2JqZWN0OiBuZXcgT2JqZWN0VHlwZSh7XG4gICAgbmFtZTogJ0dlb0pTT05Qb2ludCcsXG4gICAgZGVzY3JpcHRpb246ICdPYmplY3QgZGVzY3JpYmluZyBhIHNpbmdsZSBnZW9ncmFwaGljYWwgcG9pbnQuJyxcbiAgICBpbnRlcmZhY2VzOiAoKSA9PiBbR2VvSlNPTi5HZW9KU09OSW50ZXJmYWNlLCBHZW9KU09OLkdlb21ldHJ5SW50ZXJmYWNlXSxcbiAgICBmaWVsZHM6ICgpID0+ICh7XG4gICAgICB0eXBlOiB7IHR5cGU6IG5ldyBOb25OdWxsKEdlb0pTT04uVHlwZUVudW0pIH0sXG4gICAgICBjcnM6IHsgdHlwZTogR2VvSlNPTi5Db29yZGluYXRlUmVmZXJlbmNlU3lzdGVtT2JqZWN0IH0sXG4gICAgICBiYm94OiB7IHR5cGU6IG5ldyBMaXN0KEZsb2F0KSB9LFxuICAgICAgY29vcmRpbmF0ZXM6IHsgdHlwZTogR2VvSlNPTi5Db29yZGluYXRlc1NjYWxhciB9LFxuICAgIH0pLFxuICB9KSxcblxuICBNdWx0aVBvaW50T2JqZWN0OiBuZXcgT2JqZWN0VHlwZSh7XG4gICAgbmFtZTogJ0dlb0pTT05NdWx0aVBvaW50JyxcbiAgICBkZXNjcmlwdGlvbjogJ09iamVjdCBkZXNjcmliaW5nIG11bHRpcGxlIGdlb2dyYXBoaWNhbCBwb2ludHMuJyxcbiAgICBpbnRlcmZhY2VzOiAoKSA9PiBbR2VvSlNPTi5HZW9KU09OSW50ZXJmYWNlLCBHZW9KU09OLkdlb21ldHJ5SW50ZXJmYWNlXSxcbiAgICBmaWVsZHM6ICgpID0+ICh7XG4gICAgICB0eXBlOiB7IHR5cGU6IG5ldyBOb25OdWxsKEdlb0pTT04uVHlwZUVudW0pIH0sXG4gICAgICBjcnM6IHsgdHlwZTogR2VvSlNPTi5Db29yZGluYXRlUmVmZXJlbmNlU3lzdGVtT2JqZWN0IH0sXG4gICAgICBiYm94OiB7IHR5cGU6IG5ldyBMaXN0KEZsb2F0KSB9LFxuICAgICAgY29vcmRpbmF0ZXM6IHsgdHlwZTogR2VvSlNPTi5Db29yZGluYXRlc1NjYWxhciB9LFxuICAgIH0pLFxuICB9KSxcblxuICBMaW5lU3RyaW5nT2JqZWN0OiBuZXcgT2JqZWN0VHlwZSh7XG4gICAgbmFtZTogJ0dlb0pTT05MaW5lU3RyaW5nJyxcbiAgICBkZXNjcmlwdGlvbjogJ09iamVjdCBkZXNjcmliaW5nIGEgc2luZ2xlIGNvbm5lY3RlZCBzZXF1ZW5jZSBvZiBnZW9ncmFwaGljYWwgcG9pbnRzLicsXG4gICAgaW50ZXJmYWNlczogKCkgPT4gW0dlb0pTT04uR2VvSlNPTkludGVyZmFjZSwgR2VvSlNPTi5HZW9tZXRyeUludGVyZmFjZV0sXG4gICAgZmllbGRzOiAoKSA9PiAoe1xuICAgICAgdHlwZTogeyB0eXBlOiBuZXcgTm9uTnVsbChHZW9KU09OLlR5cGVFbnVtKSB9LFxuICAgICAgY3JzOiB7IHR5cGU6IEdlb0pTT04uQ29vcmRpbmF0ZVJlZmVyZW5jZVN5c3RlbU9iamVjdCB9LFxuICAgICAgYmJveDogeyB0eXBlOiBuZXcgTGlzdChGbG9hdCkgfSxcbiAgICAgIGNvb3JkaW5hdGVzOiB7IHR5cGU6IEdlb0pTT04uQ29vcmRpbmF0ZXNTY2FsYXIgfSxcbiAgICB9KSxcbiAgfSksXG5cbiAgTXVsdGlMaW5lU3RyaW5nT2JqZWN0OiBuZXcgT2JqZWN0VHlwZSh7XG4gICAgbmFtZTogJ0dlb0pTT05NdWx0aUxpbmVTdHJpbmcnLFxuICAgIGRlc2NyaXB0aW9uOiAnT2JqZWN0IGRlc2NyaWJpbmcgbXVsdGlwbGUgY29ubmVjdGVkIHNlcXVlbmNlcyBvZiBnZW9ncmFwaGljYWwgcG9pbnRzLicsXG4gICAgaW50ZXJmYWNlczogKCkgPT4gW0dlb0pTT04uR2VvSlNPTkludGVyZmFjZSwgR2VvSlNPTi5HZW9tZXRyeUludGVyZmFjZV0sXG4gICAgZmllbGRzOiAoKSA9PiAoe1xuICAgICAgdHlwZTogeyB0eXBlOiBuZXcgTm9uTnVsbChHZW9KU09OLlR5cGVFbnVtKSB9LFxuICAgICAgY3JzOiB7IHR5cGU6IEdlb0pTT04uQ29vcmRpbmF0ZVJlZmVyZW5jZVN5c3RlbU9iamVjdCB9LFxuICAgICAgYmJveDogeyB0eXBlOiBuZXcgTGlzdChGbG9hdCkgfSxcbiAgICAgIGNvb3JkaW5hdGVzOiB7IHR5cGU6IEdlb0pTT04uQ29vcmRpbmF0ZXNTY2FsYXIgfSxcbiAgICB9KSxcbiAgfSksXG5cbiAgUG9seWdvbk9iamVjdDogbmV3IE9iamVjdFR5cGUoe1xuICAgIG5hbWU6ICdHZW9KU09OUG9seWdvbicsXG4gICAgZGVzY3JpcHRpb246ICdPYmplY3QgZGVzY3JpYmluZyBhIHNpbmdsZSBzaGFwZSBmb3JtZWQgYnkgYSBzZXQgb2YgZ2VvZ3JhcGhpY2FsIHBvaW50cy4nLFxuICAgIGludGVyZmFjZXM6ICgpID0+IFtHZW9KU09OLkdlb0pTT05JbnRlcmZhY2UsIEdlb0pTT04uR2VvbWV0cnlJbnRlcmZhY2VdLFxuICAgIGZpZWxkczogKCkgPT4gKHtcbiAgICAgIHR5cGU6IHsgdHlwZTogbmV3IE5vbk51bGwoR2VvSlNPTi5UeXBlRW51bSkgfSxcbiAgICAgIGNyczogeyB0eXBlOiBHZW9KU09OLkNvb3JkaW5hdGVSZWZlcmVuY2VTeXN0ZW1PYmplY3QgfSxcbiAgICAgIGJib3g6IHsgdHlwZTogbmV3IExpc3QoRmxvYXQpIH0sXG4gICAgICBjb29yZGluYXRlczogeyB0eXBlOiBHZW9KU09OLkNvb3JkaW5hdGVzU2NhbGFyIH0sXG4gICAgfSksXG4gIH0pLFxuXG4gIE11bHRpUG9seWdvbk9iamVjdDogbmV3IE9iamVjdFR5cGUoe1xuICAgIG5hbWU6ICdHZW9KU09OTXVsdGlQb2x5Z29uJyxcbiAgICBkZXNjcmlwdGlvbjogJ09iamVjdCBkZXNjcmliaW5nIG11bHRpcGxlIHNoYXBlcyBmb3JtZWQgYnkgc2V0cyBvZiBnZW9ncmFwaGljYWwgcG9pbnRzLicsXG4gICAgaW50ZXJmYWNlczogKCkgPT4gW0dlb0pTT04uR2VvSlNPTkludGVyZmFjZSwgR2VvSlNPTi5HZW9tZXRyeUludGVyZmFjZV0sXG4gICAgZmllbGRzOiAoKSA9PiAoe1xuICAgICAgdHlwZTogeyB0eXBlOiBuZXcgTm9uTnVsbChHZW9KU09OLlR5cGVFbnVtKSB9LFxuICAgICAgY3JzOiB7IHR5cGU6IEdlb0pTT04uQ29vcmRpbmF0ZVJlZmVyZW5jZVN5c3RlbU9iamVjdCB9LFxuICAgICAgYmJveDogeyB0eXBlOiBuZXcgTGlzdChGbG9hdCkgfSxcbiAgICAgIGNvb3JkaW5hdGVzOiB7IHR5cGU6IEdlb0pTT04uQ29vcmRpbmF0ZXNTY2FsYXIgfSxcbiAgICB9KSxcbiAgfSksXG5cbiAgR2VvbWV0cnlDb2xsZWN0aW9uT2JqZWN0OiBuZXcgT2JqZWN0VHlwZSh7XG4gICAgbmFtZTogJ0dlb0pTT05HZW9tZXRyeUNvbGxlY3Rpb24nLFxuICAgIGRlc2NyaXB0aW9uOiAnQSBzZXQgb2YgbXVsdGlwbGUgZ2VvbWV0cmllcywgcG9zc2libHkgb2YgdmFyaW91cyB0eXBlcy4nLFxuICAgIGludGVyZmFjZXM6ICgpID0+IFtHZW9KU09OLkdlb0pTT05JbnRlcmZhY2VdLFxuICAgIGZpZWxkczogKCkgPT4gKHtcbiAgICAgIHR5cGU6IHsgdHlwZTogbmV3IE5vbk51bGwoR2VvSlNPTi5UeXBlRW51bSkgfSxcbiAgICAgIGNyczogeyB0eXBlOiBHZW9KU09OLkNvb3JkaW5hdGVSZWZlcmVuY2VTeXN0ZW1PYmplY3QgfSxcbiAgICAgIGJib3g6IHsgdHlwZTogbmV3IExpc3QoRmxvYXQpIH0sXG4gICAgICBnZW9tZXRyaWVzOiB7IHR5cGU6IG5ldyBOb25OdWxsKG5ldyBMaXN0KG5ldyBOb25OdWxsKEdlb0pTT04uR2VvbWV0cnlJbnRlcmZhY2UpKSkgfSxcbiAgICB9KSxcbiAgfSksXG5cbiAgRmVhdHVyZU9iamVjdDogbmV3IE9iamVjdFR5cGUoe1xuICAgIG5hbWU6ICdHZW9KU09ORmVhdHVyZScsXG4gICAgZGVzY3JpcHRpb246ICdBbiBvYmplY3QgdGhhdCBsaW5rcyBhIGdlb21ldHJ5IHRvIHByb3BlcnRpZXMgaW4gb3JkZXIgdG8gcHJvdmlkZSBjb250ZXh0LicsXG4gICAgaW50ZXJmYWNlczogKCkgPT4gW0dlb0pTT04uR2VvSlNPTkludGVyZmFjZV0sXG4gICAgZmllbGRzOiAoKSA9PiAoe1xuICAgICAgdHlwZTogeyB0eXBlOiBuZXcgTm9uTnVsbChHZW9KU09OLlR5cGVFbnVtKSB9LFxuICAgICAgY3JzOiB7IHR5cGU6IEdlb0pTT04uQ29vcmRpbmF0ZVJlZmVyZW5jZVN5c3RlbU9iamVjdCB9LFxuICAgICAgYmJveDogeyB0eXBlOiBuZXcgTGlzdChGbG9hdCkgfSxcbiAgICAgIGdlb21ldHJ5OiB7IHR5cGU6IEdlb0pTT04uR2VvbWV0cnlJbnRlcmZhY2UgfSxcbiAgICAgIHByb3BlcnRpZXM6IHsgdHlwZTogR2VvSlNPTi5Kc29uU2NhbGFyIH0sXG4gICAgICBpZDogeyB0eXBlOiBTdHIgfSxcbiAgICB9KSxcbiAgfSksXG5cbiAgRmVhdHVyZUNvbGxlY3Rpb25PYmplY3Q6IG5ldyBPYmplY3RUeXBlKHtcbiAgICBuYW1lOiAnR2VvSlNPTkZlYXR1cmVDb2xsZWN0aW9uJyxcbiAgICBkZXNjcmlwdGlvbjogJ0Egc2V0IG9mIG11bHRpcGxlIGZlYXR1cmVzLicsXG4gICAgaW50ZXJmYWNlczogKCkgPT4gW0dlb0pTT04uR2VvSlNPTkludGVyZmFjZV0sXG4gICAgZmllbGRzOiAoKSA9PiAoe1xuICAgICAgLy8gaWQ6IHsgdHlwZTogU3RyIH0sXG4gICAgICB0eXBlOiB7IHR5cGU6IG5ldyBOb25OdWxsKEdlb0pTT04uVHlwZUVudW0pIH0sXG4gICAgICBjcnM6IHsgdHlwZTogR2VvSlNPTi5Db29yZGluYXRlUmVmZXJlbmNlU3lzdGVtT2JqZWN0IH0sXG4gICAgICBiYm94OiB7IHR5cGU6IG5ldyBMaXN0KEZsb2F0KSB9LFxuICAgICAgZmVhdHVyZXM6IHsgdHlwZTogbmV3IE5vbk51bGwobmV3IExpc3QobmV3IE5vbk51bGwoR2VvSlNPTi5GZWF0dXJlT2JqZWN0KSkpIH0sXG4gICAgfSksXG4gIH0pLFxuXG4gIENSU1R5cGVFbnVtOiBuZXcgRW51bVR5cGUoe1xuICAgIG5hbWU6ICdHZW9KU09OQ1JTVHlwZScsXG4gICAgZGVzY3JpcHRpb246ICdFbnVtZXJhdGlvbiBvZiBhbGwgR2VvSlNPTiBDUlMgb2JqZWN0IHR5cGVzLicsXG4gICAgdmFsdWVzOiB7XG4gICAgICBuYW1lOiB7IHZhbHVlOiAnbmFtZScgfSxcbiAgICAgIGxpbms6IHsgdmFsdWU6ICdsaW5rJyB9LFxuICAgIH0sXG4gIH0pLFxuXG4gIE5hbWVkQ1JTUHJvcGVydGllc09iamVjdDogbmV3IE9iamVjdFR5cGUoe1xuICAgIG5hbWU6ICdHZW9KU09OTmFtZWRDUlNQcm9wZXJ0aWVzJyxcbiAgICBkZXNjcmlwdGlvbjogJ1Byb3BlcnRpZXMgZm9yIG5hbWUgYmFzZWQgQ1JTIG9iamVjdC4nLFxuICAgIGZpZWxkczogKCkgPT4gKHtcbiAgICAgIG5hbWU6IHsgdHlwZTogbmV3IE5vbk51bGwoU3RyKSB9LFxuICAgIH0pLFxuICB9KSxcblxuICBMaW5rZWRDUlNQcm9wZXJ0aWVzT2JqZWN0OiBuZXcgT2JqZWN0VHlwZSh7XG4gICAgbmFtZTogJ0dlb0pTT05MaW5rZWRDUlNQcm9wZXJ0aWVzJyxcbiAgICBkZXNjcmlwdGlvbjogJ1Byb3BlcnRpZXMgZm9yIGxpbmsgYmFzZWQgQ1JTIG9iamVjdC4nLFxuICAgIGZpZWxkczogKCkgPT4gKHtcbiAgICAgIGhyZWY6IHsgdHlwZTogbmV3IE5vbk51bGwoU3RyKSB9LFxuICAgICAgdHlwZTogeyB0eXBlOiBTdHIgfSxcbiAgICB9KSxcbiAgfSksXG5cbiAgQ1JTUHJvcGVydGllc1VuaW9uOiBuZXcgVW5pb25UeXBlKHtcbiAgICBuYW1lOiAnR2VvSlNPTkNSU1Byb3BlcnRpZXMnLFxuICAgIGRlc2NyaXB0aW9uOiAnQ1JTIG9iamVjdCBwcm9wZXJ0aWVzLicsXG4gICAgdHlwZXM6ICgpID0+IFtHZW9KU09OLk5hbWVkQ1JTUHJvcGVydGllc09iamVjdCwgR2VvSlNPTi5MaW5rZWRDUlNQcm9wZXJ0aWVzT2JqZWN0XSxcbiAgICByZXNvbHZlVHlwZTogdmFsdWUgPT4ge1xuICAgICAgaWYgKHZhbHVlLm5hbWUpIHtcbiAgICAgICAgcmV0dXJuIEdlb0pTT04uTmFtZWRDUlNQcm9wZXJ0aWVzT2JqZWN0O1xuICAgICAgfVxuICAgICAgaWYgKHZhbHVlLmhyZWYpIHtcbiAgICAgICAgcmV0dXJuIEdlb0pTT04uTGlua2VkQ1JTUHJvcGVydGllc09iamVjdDtcbiAgICAgIH1cbiAgICB9LFxuICB9KSxcblxuICBDb29yZGluYXRlUmVmZXJlbmNlU3lzdGVtT2JqZWN0OiBuZXcgT2JqZWN0VHlwZSh7XG4gICAgbmFtZTogJ0dlb0pTT05Db29yZGluYXRlUmVmZXJlbmNlU3lzdGVtJyxcbiAgICBkZXNjcmlwdGlvbjogJ0Nvb3JkaW5hdGUgUmVmZXJlbmNlIFN5c3RlbSAoQ1JTKSBvYmplY3QuJyxcbiAgICBmaWVsZHM6ICgpID0+ICh7XG4gICAgICB0eXBlOiB7IHR5cGU6IG5ldyBOb25OdWxsKEdlb0pTT04uQ1JTVHlwZUVudW0pIH0sXG4gICAgICBwcm9wZXJ0aWVzOiB7IHR5cGU6IG5ldyBOb25OdWxsKEdlb0pTT04uQ1JTUHJvcGVydGllc1VuaW9uKSB9LFxuICAgIH0pLFxuICB9KSxcblxuICBHZW9KU09OSW50ZXJmYWNlOiBuZXcgSW50ZXJmYWNlVHlwZSh7XG4gICAgbmFtZTogJ0dlb0pTT05JbnRlcmZhY2UnLFxuICAgIGZpZWxkczogKCkgPT4gKHtcbiAgICAgIHR5cGU6IHsgdHlwZTogbmV3IE5vbk51bGwoR2VvSlNPTi5UeXBlRW51bSkgfSxcbiAgICAgIGNyczogeyB0eXBlOiBHZW9KU09OLkNvb3JkaW5hdGVSZWZlcmVuY2VTeXN0ZW1PYmplY3QgfSxcbiAgICAgIGJib3g6IHsgdHlwZTogbmV3IExpc3QoRmxvYXQpIH0sXG4gICAgfSksXG4gICAgcmVzb2x2ZVR5cGU6IHZhbHVlID0+IEdlb0pTT05bYCR7dmFsdWUudHlwZX1PYmplY3RgXSxcbiAgfSksXG5cbiAgR2VvbWV0cnlJbnRlcmZhY2U6IG5ldyBJbnRlcmZhY2VUeXBlKHtcbiAgICBuYW1lOiAnR2VvSlNPTkdlb21ldHJ5SW50ZXJmYWNlJyxcbiAgICBmaWVsZHM6ICgpID0+ICh7XG4gICAgICB0eXBlOiB7IHR5cGU6IG5ldyBOb25OdWxsKEdlb0pTT04uVHlwZUVudW0pIH0sXG4gICAgICBjcnM6IHsgdHlwZTogR2VvSlNPTi5Db29yZGluYXRlUmVmZXJlbmNlU3lzdGVtT2JqZWN0IH0sXG4gICAgICBiYm94OiB7IHR5cGU6IG5ldyBMaXN0KEZsb2F0KSB9LFxuICAgICAgY29vcmRpbmF0ZXM6IHsgdHlwZTogR2VvSlNPTi5Db29yZGluYXRlc1NjYWxhciB9LFxuICAgIH0pLFxuICAgIHJlc29sdmVUeXBlOiB2YWx1ZSA9PiBHZW9KU09OW2Ake3ZhbHVlLnR5cGV9T2JqZWN0YF0ubmFtZSxcbiAgICAvLyByZXNvbHZlVHlwZTogdmFsdWUgPT4gdmFsdWUudHlwZSxcbiAgfSksXG5cbiAgLyoqXG4gICAqICAgICBuYW1lOiAnR2VvSlNPTlR5cGUnLFxuICAgIGRlc2NyaXB0aW9uOiAnRW51bWVyYXRpb24gb2YgYWxsIEdlb0pTT04gb2JqZWN0IHR5cGVzLicsXG4gICAgdmFsdWVzOiB7XG4gICAgICBQb2ludDogeyB2YWx1ZTogJ1BvaW50JyB9LFxuICAgICAgTXVsdGlQb2ludDogeyB2YWx1ZTogJ011bHRpUG9pbnQnIH0sXG4gICAgICBMaW5lU3RyaW5nOiB7IHZhbHVlOiAnTGluZVN0cmluZycgfSxcbiAgICAgIE11bHRpTGluZVN0cmluZzogeyB2YWx1ZTogJ011bHRpTGluZVN0cmluZycgfSxcbiAgICAgIFBvbHlnb246IHsgdmFsdWU6ICdQb2x5Z29uJyB9LFxuICAgICAgTXVsdGlQb2x5Z29uOiB7IHZhbHVlOiAnTXVsdGlQb2x5Z29uJyB9LFxuICAgICAgR2VvbWV0cnlDb2xsZWN0aW9uOiB7IHZhbHVlOiAnR2VvbWV0cnlDb2xsZWN0aW9uJyB9LFxuICAgICAgRmVhdHVyZTogeyB2YWx1ZTogJ0ZlYXR1cmUnIH0sXG4gICAgICBGZWF0dXJlQ29sbGVjdGlvbjogeyB2YWx1ZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJyB9LFxuICAgIH0sXG4gIH0pLFxuICAgKi9cbiAgR2VvbWV0cnlUeXBlVW5pb246IG5ldyBVbmlvblR5cGUoe1xuICAgIG5hbWU6ICdHZW9KU09OR2VvbWV0cnlUeXBlcycsXG4gICAgZGVzY3JpcHRpb246ICdHZW9tZXRyeSBUeXBlcycsXG4gICAgdHlwZXM6ICgpID0+IFtcbiAgICAgIEdlb0pTT04uUG9pbnRPYmplY3QsXG4gICAgICBHZW9KU09OLk11bHRpTGluZVN0cmluZ09iamVjdCxcbiAgICAgIEdlb0pTT04uTGluZVN0cmluZ09iamVjdCxcbiAgICAgIEdlb0pTT04uUG9seWdvbk9iamVjdCxcbiAgICAgIEdlb0pTT04uTXVsdGlQb2ludE9iamVjdCxcbiAgICAgIEdlb0pTT04uTXVsdGlQb2x5Z29uT2JqZWN0LFxuICAgIF0sXG4gICAgcmVzb2x2ZVR5cGU6IHZhbHVlID0+IHtcbiAgICAgIGlmICh2YWx1ZS52YWx1ZSA9PT0gR2VvSlNPTi5UeXBlRW51bS5Qb2ludC52YWx1ZSkge1xuICAgICAgICByZXR1cm4gR2VvSlNPTi5Qb2ludE9iamVjdC5uYW1lO1xuICAgICAgfVxuICAgICAgaWYgKHZhbHVlLnZhbHVlID09PSBHZW9KU09OLlR5cGVFbnVtLk11bHRpTGluZVN0cmluZy52YWx1ZSkge1xuICAgICAgICByZXR1cm4gR2VvSlNPTi5NdWx0aUxpbmVTdHJpbmdPYmplY3QubmFtZTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZS52YWx1ZSA9PT0gR2VvSlNPTi5UeXBlRW51bS5MaW5lU3RyaW5nLnZhbHVlKSB7XG4gICAgICAgIHJldHVybiBHZW9KU09OLkxpbmVTdHJpbmdPYmplY3QubmFtZTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZS52YWx1ZSA9PT0gR2VvSlNPTi5UeXBlRW51bS5NdWx0aVBvaW50LnZhbHVlKSB7XG4gICAgICAgIHJldHVybiBHZW9KU09OLk11bHRpUG9pbnRPYmplY3QubmFtZTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZS52YWx1ZSA9PT0gR2VvSlNPTi5UeXBlRW51bS5Qb2x5Z29uLnZhbHVlKSB7XG4gICAgICAgIHJldHVybiBHZW9KU09OLlBvbHlnb25PYmplY3QubmFtZTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZS52YWx1ZSA9PT0gR2VvSlNPTi5UeXBlRW51bS5NdWx0aVBvbHlnb24udmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIEdlb0pTT04uTXVsdGlQb2x5Z29uT2JqZWN0Lm5hbWU7XG4gICAgICB9XG4gICAgICBpZiAodmFsdWUudmFsdWUgPT09IEdlb0pTT04uVHlwZUVudW0uTXVsdGlQb2ludC52YWx1ZSkge1xuICAgICAgICByZXR1cm4gR2VvSlNPTi5NdWx0aVBvaW50T2JqZWN0Lm5hbWU7XG4gICAgICB9XG4gICAgfSxcbiAgfSksXG59O1xuXG5leHBvcnQgZGVmYXVsdCBHZW9KU09OO1xuIl19