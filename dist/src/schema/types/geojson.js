"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const graphql_1 = require("graphql");
const json_1 = require("./json");
function coerceCoordinates(value) {
    return value;
}
function parseCoordinates(valueAST) {
    return valueAST.value;
}
const GeoJSON = {
    TypeEnum: new graphql_1.GraphQLEnumType({
        name: 'GeoJSONType',
        description: 'Enumeration of all GeoJSON object types.',
        values: {
            Point: { value: 'Point' },
            MultiPoint: { value: 'MultiPoint' },
            LineString: { value: 'LineString' },
            MultiLineString: { value: 'MultiLineString' },
            Polygon: { value: 'Polygon' },
            MultiPolygon: { value: 'MultiPolygon' },
            GeometryCollection: { value: 'GeometryCollection' },
            Feature: { value: 'Feature' },
            FeatureCollection: { value: 'FeatureCollection' },
        },
    }),
    CoordinatesScalar: new graphql_1.GraphQLScalarType({
        name: 'GeoJSONCoordinates',
        description: 'A (multidimensional) set of coordinates following x, y, z order.',
        serialize: coerceCoordinates,
        parseValue: coerceCoordinates,
        parseLiteral: parseCoordinates,
    }),
    JSONObject: json_1.JSONObject,
    PointObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONPoint',
        description: 'Object describing a single geographical point.',
        interfaces: () => [GeoJSON.GeoJSONInterface, GeoJSON.GeometryInterface],
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            coordinates: { type: GeoJSON.CoordinatesScalar },
        }),
    }),
    MultiPointObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONMultiPoint',
        description: 'Object describing multiple geographical points.',
        interfaces: () => [GeoJSON.GeoJSONInterface, GeoJSON.GeometryInterface],
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            coordinates: { type: GeoJSON.CoordinatesScalar },
        }),
    }),
    LineStringObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONLineString',
        description: 'Object describing a single connected sequence of geographical points.',
        interfaces: () => [GeoJSON.GeoJSONInterface, GeoJSON.GeometryInterface],
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            coordinates: { type: GeoJSON.CoordinatesScalar },
        }),
    }),
    MultiLineStringObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONMultiLineString',
        description: 'Object describing multiple connected sequences of geographical points.',
        interfaces: () => [GeoJSON.GeoJSONInterface, GeoJSON.GeometryInterface],
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            coordinates: { type: GeoJSON.CoordinatesScalar },
        }),
    }),
    PolygonObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONPolygon',
        description: 'Object describing a single shape formed by a set of geographical points.',
        interfaces: () => [GeoJSON.GeoJSONInterface, GeoJSON.GeometryInterface],
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            coordinates: { type: GeoJSON.CoordinatesScalar },
        }),
    }),
    MultiPolygonObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONMultiPolygon',
        description: 'Object describing multiple shapes formed by sets of geographical points.',
        interfaces: () => [GeoJSON.GeoJSONInterface, GeoJSON.GeometryInterface],
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            coordinates: { type: GeoJSON.CoordinatesScalar },
        }),
    }),
    GeometryCollectionObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONGeometryCollection',
        description: 'A set of multiple geometries, possibly of various types.',
        interfaces: () => [GeoJSON.GeoJSONInterface],
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            geometries: { type: new graphql_1.GraphQLNonNull(new graphql_1.GraphQLList(new graphql_1.GraphQLNonNull(GeoJSON.GeometryInterface))) },
        }),
    }),
    FeatureObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONFeature',
        description: 'An object that links a geometry to properties in order to provide context.',
        interfaces: () => [GeoJSON.GeoJSONInterface],
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            geometry: { type: GeoJSON.GeometryInterface },
            properties: { type: GeoJSON.JSONObject },
            id: { type: graphql_1.GraphQLString },
        }),
    }),
    FeatureCollectionObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONFeatureCollection',
        description: 'A set of multiple features.',
        interfaces: () => [GeoJSON.GeoJSONInterface],
        fields: () => ({
            // id: { type: Str },
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            features: { type: new graphql_1.GraphQLNonNull(new graphql_1.GraphQLList(new graphql_1.GraphQLNonNull(GeoJSON.FeatureObject))) },
        }),
    }),
    CRSTypeEnum: new graphql_1.GraphQLEnumType({
        name: 'GeoJSONCRSType',
        description: 'Enumeration of all GeoJSON CRS object types.',
        values: {
            name: { value: 'name' },
            link: { value: 'link' },
        },
    }),
    NamedCRSPropertiesObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONNamedCRSProperties',
        description: 'Properties for name based CRS object.',
        fields: () => ({
            name: { type: new graphql_1.GraphQLNonNull(graphql_1.GraphQLString) },
        }),
    }),
    LinkedCRSPropertiesObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONLinkedCRSProperties',
        description: 'Properties for link based CRS object.',
        fields: () => ({
            href: { type: new graphql_1.GraphQLNonNull(graphql_1.GraphQLString) },
            type: { type: graphql_1.GraphQLString },
        }),
    }),
    CRSPropertiesUnion: new graphql_1.GraphQLUnionType({
        name: 'GeoJSONCRSProperties',
        description: 'CRS object properties.',
        types: () => [GeoJSON.NamedCRSPropertiesObject, GeoJSON.LinkedCRSPropertiesObject],
        resolveType: value => {
            if (value.name) {
                return GeoJSON.NamedCRSPropertiesObject;
            }
            if (value.href) {
                return GeoJSON.LinkedCRSPropertiesObject;
            }
        },
    }),
    CoordinateReferenceSystemObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONCoordinateReferenceSystem',
        description: 'Coordinate Reference System (CRS) object.',
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.CRSTypeEnum) },
            properties: { type: new graphql_1.GraphQLNonNull(GeoJSON.CRSPropertiesUnion) },
        }),
    }),
    GeoJSONInterface: new graphql_1.GraphQLInterfaceType({
        name: 'GeoJSONInterface',
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
        }),
        resolveType: value => GeoJSON[`${value.type}Object`],
    }),
    GeometryInterface: new graphql_1.GraphQLInterfaceType({
        name: 'GeoJSONGeometryInterface',
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            coordinates: { type: GeoJSON.CoordinatesScalar },
        }),
        resolveType: value => GeoJSON[`${value.type}Object`].name,
        // resolveType: value => value.type,
    }),
    GeometryTypeUnion: new graphql_1.GraphQLUnionType({
        name: 'GeoJSONGeometryTypes',
        description: 'Geometry Types',
        types: () => [
            GeoJSON.PointObject,
            GeoJSON.MultiLineStringObject,
            GeoJSON.LineStringObject,
            GeoJSON.PolygonObject,
            GeoJSON.MultiPointObject,
            GeoJSON.MultiPolygonObject,
        ],
        resolveType: value => {
            if (value.value === GeoJSON.TypeEnum.Point.value) {
                return GeoJSON.PointObject.name;
            }
            if (value.value === GeoJSON.TypeEnum.MultiLineString.value) {
                return GeoJSON.MultiLineStringObject.name;
            }
            if (value.value === GeoJSON.TypeEnum.LineString.value) {
                return GeoJSON.LineStringObject.name;
            }
            if (value.value === GeoJSON.TypeEnum.MultiPoint.value) {
                return GeoJSON.MultiPointObject.name;
            }
            if (value.value === GeoJSON.TypeEnum.Polygon.value) {
                return GeoJSON.PolygonObject.name;
            }
            if (value.value === GeoJSON.TypeEnum.MultiPolygon.value) {
                return GeoJSON.MultiPolygonObject.name;
            }
            if (value.value === GeoJSON.TypeEnum.MultiPoint.value) {
                return GeoJSON.MultiPointObject.name;
            }
        },
    }),
};
exports.default = GeoJSON;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VvanNvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9zY2hlbWEvdHlwZXMvZ2VvanNvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHFDQVVpQjtBQUNqQixpQ0FBb0M7QUFFcEMsU0FBUyxpQkFBaUIsQ0FBQyxLQUFVO0lBQ25DLE9BQU8sS0FBSyxDQUFDO0FBQ2YsQ0FBQztBQUVELFNBQVMsZ0JBQWdCLENBQUMsUUFBYTtJQUNyQyxPQUFPLFFBQVEsQ0FBQyxLQUFLLENBQUM7QUFDeEIsQ0FBQztBQUVELE1BQU0sT0FBTyxHQUFHO0lBQ2QsUUFBUSxFQUFFLElBQUkseUJBQVEsQ0FBQztRQUNyQixJQUFJLEVBQUUsYUFBYTtRQUNuQixXQUFXLEVBQUUsMENBQTBDO1FBQ3ZELE1BQU0sRUFBRTtZQUNOLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUU7WUFDekIsVUFBVSxFQUFFLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRTtZQUNuQyxVQUFVLEVBQUUsRUFBRSxLQUFLLEVBQUUsWUFBWSxFQUFFO1lBQ25DLGVBQWUsRUFBRSxFQUFFLEtBQUssRUFBRSxpQkFBaUIsRUFBRTtZQUM3QyxPQUFPLEVBQUUsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFO1lBQzdCLFlBQVksRUFBRSxFQUFFLEtBQUssRUFBRSxjQUFjLEVBQUU7WUFDdkMsa0JBQWtCLEVBQUUsRUFBRSxLQUFLLEVBQUUsb0JBQW9CLEVBQUU7WUFDbkQsT0FBTyxFQUFFLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRTtZQUM3QixpQkFBaUIsRUFBRSxFQUFFLEtBQUssRUFBRSxtQkFBbUIsRUFBRTtTQUNsRDtLQUNGLENBQUM7SUFFRixpQkFBaUIsRUFBRSxJQUFJLDJCQUFVLENBQUM7UUFDaEMsSUFBSSxFQUFFLG9CQUFvQjtRQUMxQixXQUFXLEVBQUUsa0VBQWtFO1FBQy9FLFNBQVMsRUFBRSxpQkFBaUI7UUFDNUIsVUFBVSxF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QUFnQixDQUFDLElBQUksQ0FBQztZQUN2QyxDQUFDO1lBQ0QsSUFBSSxLQUFLLENBQUMsS0FBSyxLQUFLLE9BQU8sQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUNuRCxPQUFPLE9BQU8sQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDO1lBQ3BDLENBQUM7WUFDRCxJQUFJLEtBQUssQ0FBQyxLQUFLLEtBQUssT0FBTyxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQ3hELE9BQU8sT0FBTyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQztZQUN6QyxDQUFDO1lBQ0QsSUFBSSxLQUFLLENBQUMsS0FBSyxLQUFLLE9BQU8sQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUN0RCxPQUFPLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUM7WUFDdkMsQ0FBQztRQUNILENBQUM7S0FDRixDQUFDO0NBQ0gsQ0FBQztBQUVGLGtCQUFlLE9BQU8sQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEdyYXBoUUxTdHJpbmcgYXMgU3RyLFxuICBHcmFwaFFMTGlzdCBhcyBMaXN0LFxuICBHcmFwaFFMRW51bVR5cGUgYXMgRW51bVR5cGUsXG4gIEdyYXBoUUxPYmplY3RUeXBlIGFzIE9iamVjdFR5cGUsXG4gIEdyYXBoUUxTY2FsYXJUeXBlIGFzIFNjYWxhclR5cGUsXG4gIEdyYXBoUUxJbnRlcmZhY2VUeXBlIGFzIEludGVyZmFjZVR5cGUsXG4gIEdyYXBoUUxVbmlvblR5cGUgYXMgVW5pb25UeXBlLFxuICBHcmFwaFFMTm9uTnVsbCBhcyBOb25OdWxsLFxuICBHcmFwaFFMRmxvYXQgYXMgRmxvYXQsXG59IGZyb20gJ2dyYXBocWwnO1xuaW1wb3J0IHsgSlNPTk9iamVjdCB9IGZyb20gXCIuL2pzb25cIjtcblxuZnVuY3Rpb24gY29lcmNlQ29vcmRpbmF0ZXModmFsdWU6IGFueSkge1xuICByZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIHBhcnNlQ29vcmRpbmF0ZXModmFsdWVBU1Q6IGFueSkge1xuICByZXR1cm4gdmFsdWVBU1QudmFsdWU7XG59XG5cbmNvbnN0IEdlb0pTT04gPSB7XG4gIFR5cGVFbnVtOiBuZXcgRW51bVR5cGUoe1xuICAgIG5hbWU6ICdHZW9KU09OVHlwZScsXG4gICAgZGVzY3JpcHRpb246ICdFbnVtZXJhdGlvbiBvZiBhbGwgR2VvSlNPTiBvYmplY3QgdHlwZXMuJyxcbiAgICB2YWx1ZXM6IHtcbiAgICAgIFBvaW50OiB7IHZhbHVlOiAnUG9pbnQnIH0sXG4gICAgICBNdWx0aVBvaW50OiB7IHZhbHVlOiAnTXVsdGlQb2ludCcgfSxcbiAgICAgIExpbmVTdHJpbmc6IHsgdmFsdWU6ICdMaW5lU3RyaW5nJyB9LFxuICAgICAgTXVsdGlMaW5lU3RyaW5nOiB7IHZhbHVlOiAnTXVsdGlMaW5lU3RyaW5nJyB9LFxuICAgICAgUG9seWdvbjogeyB2YWx1ZTogJ1BvbHlnb24nIH0sXG4gICAgICBNdWx0aVBvbHlnb246IHsgdmFsdWU6ICdNdWx0aVBvbHlnb24nIH0sXG4gICAgICBHZW9tZXRyeUNvbGxlY3Rpb246IHsgdmFsdWU6ICdHZW9tZXRyeUNvbGxlY3Rpb24nIH0sXG4gICAgICBGZWF0dXJlOiB7IHZhbHVlOiAnRmVhdHVyZScgfSxcbiAgICAgIEZlYXR1cmVDb2xsZWN0aW9uOiB7IHZhbHVlOiAnRmVhdHVyZUNvbGxlY3Rpb24nIH0sXG4gICAgfSxcbiAgfSksXG5cbiAgQ29vcmRpbmF0ZXNTY2FsYXI6IG5ldyBTY2FsYXJUeXBlKHtcbiAgICBuYW1lOiAnR2VvSlNPTkNvb3JkaW5hdGVzJyxcbiAgICBkZXNjcmlwdGlvbjogJ0EgKG11bHRpZGltZW5zaW9uYWwpIHNldCBvZiBjb29yZGluYXRlcyBmb2xsb3dpbmcgeCwgeSwgeiBvcmRlci4nLFxuICAgIHNlcmlhbGl6ZTogY29lcmNlQ29vcmRpbmF0ZXMsXG4gICAgcGFyc2VWYWx1ZTogY29lcmNlQ29vcmRpbmF0ZXMsXG4gICAgcGFyc2VMaXRlcmFsOiBwYXJzZUNvb3JkaW5hdGVzLFxuICB9KSxcblxuICBKU09OT2JqZWN0OiBKU09OT2JqZWN0LFxuXG4gIFBvaW50T2JqZWN0OiBuZXcgT2JqZWN0VHlwZSh7XG4gICAgbmFtZTogJ0dlb0pTT05Qb2ludCcsXG4gICAgZGVzY3JpcHRpb246ICdPYmplY3QgZGVzY3JpYmluZyBhIHNpbmdsZSBnZW9ncmFwaGljYWwgcG9pbnQuJyxcbiAgICBpbnRlcmZhY2VzOiAoKSA9PiBbR2VvSlNPTi5HZW9KU09OSW50ZXJmYWNlLCBHZW9KU09OLkdlb21ldHJ5SW50ZXJmYWNlXSxcbiAgICBmaWVsZHM6ICgpID0+ICh7XG4gICAgICB0eXBlOiB7IHR5cGU6IG5ldyBOb25OdWxsKEdlb0pTT04uVHlwZUVudW0pIH0sXG4gICAgICBjcnM6IHsgdHlwZTogR2VvSlNPTi5Db29yZGluYXRlUmVmZXJlbmNlU3lzdGVtT2JqZWN0IH0sXG4gICAgICBiYm94OiB7IHR5cGU6IG5ldyBMaXN0KEZsb2F0KSB9LFxuICAgICAgY29vcmRpbmF0ZXM6IHsgdHlwZTogR2VvSlNPTi5Db29yZGluYXRlc1NjYWxhciB9LFxuICAgIH0pLFxuICB9KSxcblxuICBNdWx0aVBvaW50T2JqZWN0OiBuZXcgT2JqZWN0VHlwZSh7XG4gICAgbmFtZTogJ0dlb0pTT05NdWx0aVBvaW50JyxcbiAgICBkZXNjcmlwdGlvbjogJ09iamVjdCBkZXNjcmliaW5nIG11bHRpcGxlIGdlb2dyYXBoaWNhbCBwb2ludHMuJyxcbiAgICBpbnRlcmZhY2VzOiAoKSA9PiBbR2VvSlNPTi5HZW9KU09OSW50ZXJmYWNlLCBHZW9KU09OLkdlb21ldHJ5SW50ZXJmYWNlXSxcbiAgICBmaWVsZHM6ICgpID0+ICh7XG4gICAgICB0eXBlOiB7IHR5cGU6IG5ldyBOb25OdWxsKEdlb0pTT04uVHlwZUVudW0pIH0sXG4gICAgICBjcnM6IHsgdHlwZTogR2VvSlNPTi5Db29yZGluYXRlUmVmZXJlbmNlU3lzdGVtT2JqZWN0IH0sXG4gICAgICBiYm94OiB7IHR5cGU6IG5ldyBMaXN0KEZsb2F0KSB9LFxuICAgICAgY29vcmRpbmF0ZXM6IHsgdHlwZTogR2VvSlNPTi5Db29yZGluYXRlc1NjYWxhciB9LFxuICAgIH0pLFxuICB9KSxcblxuICBMaW5lU3RyaW5nT2JqZWN0OiBuZXcgT2JqZWN0VHlwZSh7XG4gICAgbmFtZTogJ0dlb0pTT05MaW5lU3RyaW5nJyxcbiAgICBkZXNjcmlwdGlvbjogJ09iamVjdCBkZXNjcmliaW5nIGEgc2luZ2xlIGNvbm5lY3RlZCBzZXF1ZW5jZSBvZiBnZW9ncmFwaGljYWwgcG9pbnRzLicsXG4gICAgaW50ZXJmYWNlczogKCkgPT4gW0dlb0pTT04uR2VvSlNPTkludGVyZmFjZSwgR2VvSlNPTi5HZW9tZXRyeUludGVyZmFjZV0sXG4gICAgZmllbGRzOiAoKSA9PiAoe1xuICAgICAgdHlwZTogeyB0eXBlOiBuZXcgTm9uTnVsbChHZW9KU09OLlR5cGVFbnVtKSB9LFxuICAgICAgY3JzOiB7IHR5cGU6IEdlb0pTT04uQ29vcmRpbmF0ZVJlZmVyZW5jZVN5c3RlbU9iamVjdCB9LFxuICAgICAgYmJveDogeyB0eXBlOiBuZXcgTGlzdChGbG9hdCkgfSxcbiAgICAgIGNvb3JkaW5hdGVzOiB7IHR5cGU6IEdlb0pTT04uQ29vcmRpbmF0ZXNTY2FsYXIgfSxcbiAgICB9KSxcbiAgfSksXG5cbiAgTXVsdGlMaW5lU3RyaW5nT2JqZWN0OiBuZXcgT2JqZWN0VHlwZSh7XG4gICAgbmFtZTogJ0dlb0pTT05NdWx0aUxpbmVTdHJpbmcnLFxuICAgIGRlc2NyaXB0aW9uOiAnT2JqZWN0IGRlc2NyaWJpbmcgbXVsdGlwbGUgY29ubmVjdGVkIHNlcXVlbmNlcyBvZiBnZW9ncmFwaGljYWwgcG9pbnRzLicsXG4gICAgaW50ZXJmYWNlczogKCkgPT4gW0dlb0pTT04uR2VvSlNPTkludGVyZmFjZSwgR2VvSlNPTi5HZW9tZXRyeUludGVyZmFjZV0sXG4gICAgZmllbGRzOiAoKSA9PiAoe1xuICAgICAgdHlwZTogeyB0eXBlOiBuZXcgTm9uTnVsbChHZW9KU09OLlR5cGVFbnVtKSB9LFxuICAgICAgY3JzOiB7IHR5cGU6IEdlb0pTT04uQ29vcmRpbmF0ZVJlZmVyZW5jZVN5c3RlbU9iamVjdCB9LFxuICAgICAgYmJveDogeyB0eXBlOiBuZXcgTGlzdChGbG9hdCkgfSxcbiAgICAgIGNvb3JkaW5hdGVzOiB7IHR5cGU6IEdlb0pTT04uQ29vcmRpbmF0ZXNTY2FsYXIgfSxcbiAgICB9KSxcbiAgfSksXG5cbiAgUG9seWdvbk9iamVjdDogbmV3IE9iamVjdFR5cGUoe1xuICAgIG5hbWU6ICdHZW9KU09OUG9seWdvbicsXG4gICAgZGVzY3JpcHRpb246ICdPYmplY3QgZGVzY3JpYmluZyBhIHNpbmdsZSBzaGFwZSBmb3JtZWQgYnkgYSBzZXQgb2YgZ2VvZ3JhcGhpY2FsIHBvaW50cy4nLFxuICAgIGludGVyZmFjZXM6ICgpID0+IFtHZW9KU09OLkdlb0pTT05JbnRlcmZhY2UsIEdlb0pTT04uR2VvbWV0cnlJbnRlcmZhY2VdLFxuICAgIGZpZWxkczogKCkgPT4gKHtcbiAgICAgIHR5cGU6IHsgdHlwZTogbmV3IE5vbk51bGwoR2VvSlNPTi5UeXBlRW51bSkgfSxcbiAgICAgIGNyczogeyB0eXBlOiBHZW9KU09OLkNvb3JkaW5hdGVSZWZlcmVuY2VTeXN0ZW1PYmplY3QgfSxcbiAgICAgIGJib3g6IHsgdHlwZTogbmV3IExpc3QoRmxvYXQpIH0sXG4gICAgICBjb29yZGluYXRlczogeyB0eXBlOiBHZW9KU09OLkNvb3JkaW5hdGVzU2NhbGFyIH0sXG4gICAgfSksXG4gIH0pLFxuXG4gIE11bHRpUG9seWdvbk9iamVjdDogbmV3IE9iamVjdFR5cGUoe1xuICAgIG5hbWU6ICdHZW9KU09OTXVsdGlQb2x5Z29uJyxcbiAgICBkZXNjcmlwdGlvbjogJ09iamVjdCBkZXNjcmliaW5nIG11bHRpcGxlIHNoYXBlcyBmb3JtZWQgYnkgc2V0cyBvZiBnZW9ncmFwaGljYWwgcG9pbnRzLicsXG4gICAgaW50ZXJmYWNlczogKCkgPT4gW0dlb0pTT04uR2VvSlNPTkludGVyZmFjZSwgR2VvSlNPTi5HZW9tZXRyeUludGVyZmFjZV0sXG4gICAgZmllbGRzOiAoKSA9PiAoe1xuICAgICAgdHlwZTogeyB0eXBlOiBuZXcgTm9uTnVsbChHZW9KU09OLlR5cGVFbnVtKSB9LFxuICAgICAgY3JzOiB7IHR5cGU6IEdlb0pTT04uQ29vcmRpbmF0ZVJlZmVyZW5jZVN5c3RlbU9iamVjdCB9LFxuICAgICAgYmJveDogeyB0eXBlOiBuZXcgTGlzdChGbG9hdCkgfSxcbiAgICAgIGNvb3JkaW5hdGVzOiB7IHR5cGU6IEdlb0pTT04uQ29vcmRpbmF0ZXNTY2FsYXIgfSxcbiAgICB9KSxcbiAgfSksXG5cbiAgR2VvbWV0cnlDb2xsZWN0aW9uT2JqZWN0OiBuZXcgT2JqZWN0VHlwZSh7XG4gICAgbmFtZTogJ0dlb0pTT05HZW9tZXRyeUNvbGxlY3Rpb24nLFxuICAgIGRlc2NyaXB0aW9uOiAnQSBzZXQgb2YgbXVsdGlwbGUgZ2VvbWV0cmllcywgcG9zc2libHkgb2YgdmFyaW91cyB0eXBlcy4nLFxuICAgIGludGVyZmFjZXM6ICgpID0+IFtHZW9KU09OLkdlb0pTT05JbnRlcmZhY2VdLFxuICAgIGZpZWxkczogKCkgPT4gKHtcbiAgICAgIHR5cGU6IHsgdHlwZTogbmV3IE5vbk51bGwoR2VvSlNPTi5UeXBlRW51bSkgfSxcbiAgICAgIGNyczogeyB0eXBlOiBHZW9KU09OLkNvb3JkaW5hdGVSZWZlcmVuY2VTeXN0ZW1PYmplY3QgfSxcbiAgICAgIGJib3g6IHsgdHlwZTogbmV3IExpc3QoRmxvYXQpIH0sXG4gICAgICBnZW9tZXRyaWVzOiB7IHR5cGU6IG5ldyBOb25OdWxsKG5ldyBMaXN0KG5ldyBOb25OdWxsKEdlb0pTT04uR2VvbWV0cnlJbnRlcmZhY2UpKSkgfSxcbiAgICB9KSxcbiAgfSksXG5cbiAgRmVhdHVyZU9iamVjdDogbmV3IE9iamVjdFR5cGUoe1xuICAgIG5hbWU6ICdHZW9KU09ORmVhdHVyZScsXG4gICAgZGVzY3JpcHRpb246ICdBbiBvYmplY3QgdGhhdCBsaW5rcyBhIGdlb21ldHJ5IHRvIHByb3BlcnRpZXMgaW4gb3JkZXIgdG8gcHJvdmlkZSBjb250ZXh0LicsXG4gICAgaW50ZXJmYWNlczogKCkgPT4gW0dlb0pTT04uR2VvSlNPTkludGVyZmFjZV0sXG4gICAgZmllbGRzOiAoKSA9PiAoe1xuICAgICAgdHlwZTogeyB0eXBlOiBuZXcgTm9uTnVsbChHZW9KU09OLlR5cGVFbnVtKSB9LFxuICAgICAgY3JzOiB7IHR5cGU6IEdlb0pTT04uQ29vcmRpbmF0ZVJlZmVyZW5jZVN5c3RlbU9iamVjdCB9LFxuICAgICAgYmJveDogeyB0eXBlOiBuZXcgTGlzdChGbG9hdCkgfSxcbiAgICAgIGdlb21ldHJ5OiB7IHR5cGU6IEdlb0pTT04uR2VvbWV0cnlJbnRlcmZhY2UgfSxcbiAgICAgIHByb3BlcnRpZXM6IHsgdHlwZTogR2VvSlNPTi5KU09OT2JqZWN0IH0sXG4gICAgICBpZDogeyB0eXBlOiBTdHIgfSxcbiAgICB9KSxcbiAgfSksXG5cbiAgRmVhdHVyZUNvbGxlY3Rpb25PYmplY3Q6IG5ldyBPYmplY3RUeXBlKHtcbiAgICBuYW1lOiAnR2VvSlNPTkZlYXR1cmVDb2xsZWN0aW9uJyxcbiAgICBkZXNjcmlwdGlvbjogJ0Egc2V0IG9mIG11bHRpcGxlIGZlYXR1cmVzLicsXG4gICAgaW50ZXJmYWNlczogKCkgPT4gW0dlb0pTT04uR2VvSlNPTkludGVyZmFjZV0sXG4gICAgZmllbGRzOiAoKSA9PiAoe1xuICAgICAgLy8gaWQ6IHsgdHlwZTogU3RyIH0sXG4gICAgICB0eXBlOiB7IHR5cGU6IG5ldyBOb25OdWxsKEdlb0pTT04uVHlwZUVudW0pIH0sXG4gICAgICBjcnM6IHsgdHlwZTogR2VvSlNPTi5Db29yZGluYXRlUmVmZXJlbmNlU3lzdGVtT2JqZWN0IH0sXG4gICAgICBiYm94OiB7IHR5cGU6IG5ldyBMaXN0KEZsb2F0KSB9LFxuICAgICAgZmVhdHVyZXM6IHsgdHlwZTogbmV3IE5vbk51bGwobmV3IExpc3QobmV3IE5vbk51bGwoR2VvSlNPTi5GZWF0dXJlT2JqZWN0KSkpIH0sXG4gICAgfSksXG4gIH0pLFxuXG4gIENSU1R5cGVFbnVtOiBuZXcgRW51bVR5cGUoe1xuICAgIG5hbWU6ICdHZW9KU09OQ1JTVHlwZScsXG4gICAgZGVzY3JpcHRpb246ICdFbnVtZXJhdGlvbiBvZiBhbGwgR2VvSlNPTiBDUlMgb2JqZWN0IHR5cGVzLicsXG4gICAgdmFsdWVzOiB7XG4gICAgICBuYW1lOiB7IHZhbHVlOiAnbmFtZScgfSxcbiAgICAgIGxpbms6IHsgdmFsdWU6ICdsaW5rJyB9LFxuICAgIH0sXG4gIH0pLFxuXG4gIE5hbWVkQ1JTUHJvcGVydGllc09iamVjdDogbmV3IE9iamVjdFR5cGUoe1xuICAgIG5hbWU6ICdHZW9KU09OTmFtZWRDUlNQcm9wZXJ0aWVzJyxcbiAgICBkZXNjcmlwdGlvbjogJ1Byb3BlcnRpZXMgZm9yIG5hbWUgYmFzZWQgQ1JTIG9iamVjdC4nLFxuICAgIGZpZWxkczogKCkgPT4gKHtcbiAgICAgIG5hbWU6IHsgdHlwZTogbmV3IE5vbk51bGwoU3RyKSB9LFxuICAgIH0pLFxuICB9KSxcblxuICBMaW5rZWRDUlNQcm9wZXJ0aWVzT2JqZWN0OiBuZXcgT2JqZWN0VHlwZSh7XG4gICAgbmFtZTogJ0dlb0pTT05MaW5rZWRDUlNQcm9wZXJ0aWVzJyxcbiAgICBkZXNjcmlwdGlvbjogJ1Byb3BlcnRpZXMgZm9yIGxpbmsgYmFzZWQgQ1JTIG9iamVjdC4nLFxuICAgIGZpZWxkczogKCkgPT4gKHtcbiAgICAgIGhyZWY6IHsgdHlwZTogbmV3IE5vbk51bGwoU3RyKSB9LFxuICAgICAgdHlwZTogeyB0eXBlOiBTdHIgfSxcbiAgICB9KSxcbiAgfSksXG5cbiAgQ1JTUHJvcGVydGllc1VuaW9uOiBuZXcgVW5pb25UeXBlKHtcbiAgICBuYW1lOiAnR2VvSlNPTkNSU1Byb3BlcnRpZXMnLFxuICAgIGRlc2NyaXB0aW9uOiAnQ1JTIG9iamVjdCBwcm9wZXJ0aWVzLicsXG4gICAgdHlwZXM6ICgpID0+IFtHZW9KU09OLk5hbWVkQ1JTUHJvcGVydGllc09iamVjdCwgR2VvSlNPTi5MaW5rZWRDUlNQcm9wZXJ0aWVzT2JqZWN0XSxcbiAgICByZXNvbHZlVHlwZTogdmFsdWUgPT4ge1xuICAgICAgaWYgKHZhbHVlLm5hbWUpIHtcbiAgICAgICAgcmV0dXJuIEdlb0pTT04uTmFtZWRDUlNQcm9wZXJ0aWVzT2JqZWN0O1xuICAgICAgfVxuICAgICAgaWYgKHZhbHVlLmhyZWYpIHtcbiAgICAgICAgcmV0dXJuIEdlb0pTT04uTGlua2VkQ1JTUHJvcGVydGllc09iamVjdDtcbiAgICAgIH1cbiAgICB9LFxuICB9KSxcblxuICBDb29yZGluYXRlUmVmZXJlbmNlU3lzdGVtT2JqZWN0OiBuZXcgT2JqZWN0VHlwZSh7XG4gICAgbmFtZTogJ0dlb0pTT05Db29yZGluYXRlUmVmZXJlbmNlU3lzdGVtJyxcbiAgICBkZXNjcmlwdGlvbjogJ0Nvb3JkaW5hdGUgUmVmZXJlbmNlIFN5c3RlbSAoQ1JTKSBvYmplY3QuJyxcbiAgICBmaWVsZHM6ICgpID0+ICh7XG4gICAgICB0eXBlOiB7IHR5cGU6IG5ldyBOb25OdWxsKEdlb0pTT04uQ1JTVHlwZUVudW0pIH0sXG4gICAgICBwcm9wZXJ0aWVzOiB7IHR5cGU6IG5ldyBOb25OdWxsKEdlb0pTT04uQ1JTUHJvcGVydGllc1VuaW9uKSB9LFxuICAgIH0pLFxuICB9KSxcblxuICBHZW9KU09OSW50ZXJmYWNlOiBuZXcgSW50ZXJmYWNlVHlwZSh7XG4gICAgbmFtZTogJ0dlb0pTT05JbnRlcmZhY2UnLFxuICAgIGZpZWxkczogKCkgPT4gKHtcbiAgICAgIHR5cGU6IHsgdHlwZTogbmV3IE5vbk51bGwoR2VvSlNPTi5UeXBlRW51bSkgfSxcbiAgICAgIGNyczogeyB0eXBlOiBHZW9KU09OLkNvb3JkaW5hdGVSZWZlcmVuY2VTeXN0ZW1PYmplY3QgfSxcbiAgICAgIGJib3g6IHsgdHlwZTogbmV3IExpc3QoRmxvYXQpIH0sXG4gICAgfSksXG4gICAgcmVzb2x2ZVR5cGU6IHZhbHVlID0+IEdlb0pTT05bYCR7dmFsdWUudHlwZX1PYmplY3RgXSxcbiAgfSksXG5cbiAgR2VvbWV0cnlJbnRlcmZhY2U6IG5ldyBJbnRlcmZhY2VUeXBlKHtcbiAgICBuYW1lOiAnR2VvSlNPTkdlb21ldHJ5SW50ZXJmYWNlJyxcbiAgICBmaWVsZHM6ICgpID0+ICh7XG4gICAgICB0eXBlOiB7IHR5cGU6IG5ldyBOb25OdWxsKEdlb0pTT04uVHlwZUVudW0pIH0sXG4gICAgICBjcnM6IHsgdHlwZTogR2VvSlNPTi5Db29yZGluYXRlUmVmZXJlbmNlU3lzdGVtT2JqZWN0IH0sXG4gICAgICBiYm94OiB7IHR5cGU6IG5ldyBMaXN0KEZsb2F0KSB9LFxuICAgICAgY29vcmRpbmF0ZXM6IHsgdHlwZTogR2VvSlNPTi5Db29yZGluYXRlc1NjYWxhciB9LFxuICAgIH0pLFxuICAgIHJlc29sdmVUeXBlOiB2YWx1ZSA9PiBHZW9KU09OW2Ake3ZhbHVlLnR5cGV9T2JqZWN0YF0ubmFtZSxcbiAgICAvLyByZXNvbHZlVHlwZTogdmFsdWUgPT4gdmFsdWUudHlwZSxcbiAgfSksXG5cbiAgR2VvbWV0cnlUeXBlVW5pb246IG5ldyBVbmlvblR5cGUoe1xuICAgIG5hbWU6ICdHZW9KU09OR2VvbWV0cnlUeXBlcycsXG4gICAgZGVzY3JpcHRpb246ICdHZW9tZXRyeSBUeXBlcycsXG4gICAgdHlwZXM6ICgpID0+IFtcbiAgICAgIEdlb0pTT04uUG9pbnRPYmplY3QsXG4gICAgICBHZW9KU09OLk11bHRpTGluZVN0cmluZ09iamVjdCxcbiAgICAgIEdlb0pTT04uTGluZVN0cmluZ09iamVjdCxcbiAgICAgIEdlb0pTT04uUG9seWdvbk9iamVjdCxcbiAgICAgIEdlb0pTT04uTXVsdGlQb2ludE9iamVjdCxcbiAgICAgIEdlb0pTT04uTXVsdGlQb2x5Z29uT2JqZWN0LFxuICAgIF0sXG4gICAgcmVzb2x2ZVR5cGU6IHZhbHVlID0+IHtcbiAgICAgIGlmICh2YWx1ZS52YWx1ZSA9PT0gR2VvSlNPTi5UeXBlRW51bS5Qb2ludC52YWx1ZSkge1xuICAgICAgICByZXR1cm4gR2VvSlNPTi5Qb2ludE9iamVjdC5uYW1lO1xuICAgICAgfVxuICAgICAgaWYgKHZhbHVlLnZhbHVlID09PSBHZW9KU09OLlR5cGVFbnVtLk11bHRpTGluZVN0cmluZy52YWx1ZSkge1xuICAgICAgICByZXR1cm4gR2VvSlNPTi5NdWx0aUxpbmVTdHJpbmdPYmplY3QubmFtZTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZS52YWx1ZSA9PT0gR2VvSlNPTi5UeXBlRW51bS5MaW5lU3RyaW5nLnZhbHVlKSB7XG4gICAgICAgIHJldHVybiBHZW9KU09OLkxpbmVTdHJpbmdPYmplY3QubmFtZTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZS52YWx1ZSA9PT0gR2VvSlNPTi5UeXBlRW51bS5NdWx0aVBvaW50LnZhbHVlKSB7XG4gICAgICAgIHJldHVybiBHZW9KU09OLk11bHRpUG9pbnRPYmplY3QubmFtZTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZS52YWx1ZSA9PT0gR2VvSlNPTi5UeXBlRW51bS5Qb2x5Z29uLnZhbHVlKSB7XG4gICAgICAgIHJldHVybiBHZW9KU09OLlBvbHlnb25PYmplY3QubmFtZTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZS52YWx1ZSA9PT0gR2VvSlNPTi5UeXBlRW51bS5NdWx0aVBvbHlnb24udmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIEdlb0pTT04uTXVsdGlQb2x5Z29uT2JqZWN0Lm5hbWU7XG4gICAgICB9XG4gICAgICBpZiAodmFsdWUudmFsdWUgPT09IEdlb0pTT04uVHlwZUVudW0uTXVsdGlQb2ludC52YWx1ZSkge1xuICAgICAgICByZXR1cm4gR2VvSlNPTi5NdWx0aVBvaW50T2JqZWN0Lm5hbWU7XG4gICAgICB9XG4gICAgfSxcbiAgfSksXG59O1xuXG5leHBvcnQgZGVmYXVsdCBHZW9KU09OO1xuIl19