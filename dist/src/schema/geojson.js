"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const graphql_1 = require("graphql");
function coerceCoordinates(value) {
    return value;
}
function parseCoordinates(valueAST) {
    return valueAST.value;
}
function coerceObject(value) {
    try {
        return JSON.parse(value);
    }
    catch (err) {
        return value;
    }
}
function parseObject(valueAST) {
    return JSON.stringify(valueAST.value);
}
const GeoJSON = {
    TypeEnum: new graphql_1.GraphQLEnumType({
        name: 'GeoJSONType',
        description: 'Enumeration of all GeoJSON object types.',
        values: {
            Point: { value: 'Point' },
            MultiPoint: { value: 'MultiPoint' },
            LineString: { value: 'LineString' },
            MultiLineString: { value: 'MultiLineString' },
            Polygon: { value: 'Polygon' },
            MultiPolygon: { value: 'MultiPolygon' },
            GeometryCollection: { value: 'GeometryCollection' },
            Feature: { value: 'Feature' },
            FeatureCollection: { value: 'FeatureCollection' },
        },
    }),
    CoordinatesScalar: new graphql_1.GraphQLScalarType({
        name: 'GeoJSONCoordinates',
        description: 'A (multidimensional) set of coordinates following x, y, z order.',
        serialize: coerceCoordinates,
        parseValue: coerceCoordinates,
        parseLiteral: parseCoordinates,
    }),
    JsonScalar: new graphql_1.GraphQLScalarType({
        name: 'JSONObject',
        description: 'Arbitrary JSON value',
        serialize: coerceObject,
        parseValue: coerceObject,
        parseLiteral: parseObject,
    }),
    PointObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONPoint',
        description: 'Object describing a single geographical point.',
        interfaces: () => [GeoJSON.GeoJSONInterface, GeoJSON.GeometryInterface],
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            coordinates: { type: GeoJSON.CoordinatesScalar },
        }),
    }),
    MultiPointObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONMultiPoint',
        description: 'Object describing multiple geographical points.',
        interfaces: () => [GeoJSON.GeoJSONInterface, GeoJSON.GeometryInterface],
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            coordinates: { type: GeoJSON.CoordinatesScalar },
        }),
    }),
    LineStringObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONLineString',
        description: 'Object describing a single connected sequence of geographical points.',
        interfaces: () => [GeoJSON.GeoJSONInterface, GeoJSON.GeometryInterface],
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            coordinates: { type: GeoJSON.CoordinatesScalar },
        }),
    }),
    MultiLineStringObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONMultiLineString',
        description: 'Object describing multiple connected sequences of geographical points.',
        interfaces: () => [GeoJSON.GeoJSONInterface, GeoJSON.GeometryInterface],
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            coordinates: { type: GeoJSON.CoordinatesScalar },
        }),
    }),
    PolygonObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONPolygon',
        description: 'Object describing a single shape formed by a set of geographical points.',
        interfaces: () => [GeoJSON.GeoJSONInterface, GeoJSON.GeometryInterface],
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            coordinates: { type: GeoJSON.CoordinatesScalar },
        }),
    }),
    MultiPolygonObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONMultiPolygon',
        description: 'Object describing multiple shapes formed by sets of geographical points.',
        interfaces: () => [GeoJSON.GeoJSONInterface, GeoJSON.GeometryInterface],
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            coordinates: { type: GeoJSON.CoordinatesScalar },
        }),
    }),
    GeometryCollectionObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONGeometryCollection',
        description: 'A set of multiple geometries, possibly of various types.',
        interfaces: () => [GeoJSON.GeoJSONInterface],
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            geometries: { type: new graphql_1.GraphQLNonNull(new graphql_1.GraphQLList(new graphql_1.GraphQLNonNull(GeoJSON.GeometryInterface))) },
        }),
    }),
    FeatureObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONFeature',
        description: 'An object that links a geometry to properties in order to provide context.',
        interfaces: () => [GeoJSON.GeoJSONInterface],
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            geometry: { type: GeoJSON.GeometryInterface },
            properties: { type: GeoJSON.JsonScalar },
            id: { type: graphql_1.GraphQLString },
        }),
    }),
    FeatureCollectionObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONFeatureCollection',
        description: 'A set of multiple features.',
        interfaces: () => [GeoJSON.GeoJSONInterface],
        fields: () => ({
            // id: { type: Str },
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            features: { type: new graphql_1.GraphQLNonNull(new graphql_1.GraphQLList(new graphql_1.GraphQLNonNull(GeoJSON.FeatureObject))) },
        }),
    }),
    CRSTypeEnum: new graphql_1.GraphQLEnumType({
        name: 'GeoJSONCRSType',
        description: 'Enumeration of all GeoJSON CRS object types.',
        values: {
            name: { value: 'name' },
            link: { value: 'link' },
        },
    }),
    NamedCRSPropertiesObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONNamedCRSProperties',
        description: 'Properties for name based CRS object.',
        fields: () => ({
            name: { type: new graphql_1.GraphQLNonNull(graphql_1.GraphQLString) },
        }),
    }),
    LinkedCRSPropertiesObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONLinkedCRSProperties',
        description: 'Properties for link based CRS object.',
        fields: () => ({
            href: { type: new graphql_1.GraphQLNonNull(graphql_1.GraphQLString) },
            type: { type: graphql_1.GraphQLString },
        }),
    }),
    CRSPropertiesUnion: new graphql_1.GraphQLUnionType({
        name: 'GeoJSONCRSProperties',
        description: 'CRS object properties.',
        types: () => [GeoJSON.NamedCRSPropertiesObject, GeoJSON.LinkedCRSPropertiesObject],
        resolveType: value => {
            if (value.name) {
                return GeoJSON.NamedCRSPropertiesObject;
            }
            if (value.href) {
                return GeoJSON.LinkedCRSPropertiesObject;
            }
        },
    }),
    CoordinateReferenceSystemObject: new graphql_1.GraphQLObjectType({
        name: 'GeoJSONCoordinateReferenceSystem',
        description: 'Coordinate Reference System (CRS) object.',
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.CRSTypeEnum) },
            properties: { type: new graphql_1.GraphQLNonNull(GeoJSON.CRSPropertiesUnion) },
        }),
    }),
    GeoJSONInterface: new graphql_1.GraphQLInterfaceType({
        name: 'GeoJSONInterface',
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
        }),
        resolveType: value => GeoJSON[`${value.type}Object`],
    }),
    GeometryInterface: new graphql_1.GraphQLInterfaceType({
        name: 'GeoJSONGeometryInterface',
        fields: () => ({
            type: { type: new graphql_1.GraphQLNonNull(GeoJSON.TypeEnum) },
            crs: { type: GeoJSON.CoordinateReferenceSystemObject },
            bbox: { type: new graphql_1.GraphQLList(graphql_1.GraphQLFloat) },
            coordinates: { type: GeoJSON.CoordinatesScalar },
        }),
        resolveType: value => GeoJSON[`${value.type}Object`].name,
        // resolveType: value => value.type,
    }),
    /**
     *     name: 'GeoJSONType',
      description: 'Enumeration of all GeoJSON object types.',
      values: {
        Point: { value: 'Point' },
        MultiPoint: { value: 'MultiPoint' },
        LineString: { value: 'LineString' },
        MultiLineString: { value: 'MultiLineString' },
        Polygon: { value: 'Polygon' },
        MultiPolygon: { value: 'MultiPolygon' },
        GeometryCollection: { value: 'GeometryCollection' },
        Feature: { value: 'Feature' },
        FeatureCollection: { value: 'FeatureCollection' },
      },
    }),
     */
    GeometryTypeUnion: new graphql_1.GraphQLUnionType({
        name: 'GeoJSONGeometryTypes',
        description: 'Geometry Types',
        types: () => [
            GeoJSON.PointObject,
            GeoJSON.MultiLineStringObject,
            GeoJSON.LineStringObject,
            GeoJSON.PolygonObject,
            GeoJSON.MultiPointObject,
            GeoJSON.MultiPolygonObject,
        ],
        resolveType: value => {
            if (value.value === GeoJSON.TypeEnum.Point.value) {
                return GeoJSON.PointObject.name;
            }
            if (value.value === GeoJSON.TypeEnum.MultiLineString.value) {
                return GeoJSON.MultiLineStringObject.name;
            }
            if (value.value === GeoJSON.TypeEnum.LineString.value) {
                return GeoJSON.LineStringObject.name;
            }
            if (value.value === GeoJSON.TypeEnum.MultiPoint.value) {
                return GeoJSON.MultiPointObject.name;
            }
            if (value.value === GeoJSON.TypeEnum.Polygon.value) {
                return GeoJSON.PolygonObject.name;
            }
            if (value.value === GeoJSON.TypeEnum.MultiPolygon.value) {
                return GeoJSON.MultiPolygonObject.name;
            }
            if (value.value === GeoJSON.TypeEnum.MultiPoint.value) {
                return GeoJSON.MultiPointObject.name;
            }
        },
    }),
};
exports.default = GeoJSON;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VvanNvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zY2hlbWEvZ2VvanNvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHFDQVVpQjtBQUVqQixTQUFTLGlCQUFpQixDQUFDLEtBQUs7SUFDOUIsT0FBTyxLQUFLLENBQUM7QUFDZixDQUFDO0FBRUQsU0FBUyxnQkFBZ0IsQ0FBQyxRQUFRO0lBQ2hDLE9BQU8sUUFBUSxDQUFDLEtBQUssQ0FBQztBQUN4QixDQUFDO0FBRUQsU0FBUyxZQUFZLENBQUMsS0FBSztJQUN6QixJQUFJLENBQUM7UUFDSCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDM0IsQ0FBQztJQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7UUFDYixPQUFPLEtBQUssQ0FBQztJQUNmLENBQUM7QUFDSCxDQUFDO0FBRUQsU0FBUyxXQUFXLENBQUMsUUFBUTtJQUMzQixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3hDLENBQUM7QUFFRCxNQUFNLE9BQU8sR0FBRztJQUNkLFFBQVEsRUFBRSxJQUFJLHlCQUFRLENBQUM7UUFDckIsSUFBSSxFQUFFLGFBQWE7UUFDbkIsV0FBVyxFQUFFLDBDQUEwQztRQUN2RCxNQUFNLEVBQUU7WUFDTixLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFO1lBQ3pCLFVBQVUsRUFBRSxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUU7WUFDbkMsVUFBVSxFQUFFLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRTtZQUNuQyxlQUFlLEVBQUUsRUFBRSxLQUFLLEVBQUUsaUJBQWlCLEVBQUU7WUFDN0MsT0FBTyxFQUFFLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRTtZQUM3QixZQUFZLEVBQUUsRUFBRSxLQUFLLEVBQUUsY0FBYyxFQUFFO1lBQ3ZDLGtCQUFrQixFQUFFLEVBQUUsS0FBSyxF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cyBTdHIsXG4gIEdyYXBoUUxMaXN0IGFzIExpc3QsXG4gIEdyYXBoUUxFbnVtVHlwZSBhcyBFbnVtVHlwZSxcbiAgR3JhcGhRTE9iamVjdFR5cGUgYXMgT2JqZWN0VHlwZSxcbiAgR3JhcGhRTFNjYWxhclR5cGUgYXMgU2NhbGFyVHlwZSxcbiAgR3JhcGhRTEludGVyZmFjZVR5cGUgYXMgSW50ZXJmYWNlVHlwZSxcbiAgR3JhcGhRTFVuaW9uVHlwZSBhcyBVbmlvblR5cGUsXG4gIEdyYXBoUUxOb25OdWxsIGFzIE5vbk51bGwsXG4gIEdyYXBoUUxGbG9hdCBhcyBGbG9hdCxcbn0gZnJvbSAnZ3JhcGhxbCc7XG5cbmZ1bmN0aW9uIGNvZXJjZUNvb3JkaW5hdGVzKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gcGFyc2VDb29yZGluYXRlcyh2YWx1ZUFTVCkge1xuICByZXR1cm4gdmFsdWVBU1QudmFsdWU7XG59XG5cbmZ1bmN0aW9uIGNvZXJjZU9iamVjdCh2YWx1ZSkge1xuICB0cnkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKHZhbHVlKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBhcnNlT2JqZWN0KHZhbHVlQVNUKSB7XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWx1ZUFTVC52YWx1ZSk7XG59XG5cbmNvbnN0IEdlb0pTT04gPSB7XG4gIFR5cGVFbnVtOiBuZXcgRW51bVR5cGUoe1xuICAgIG5hbWU6ICdHZW9KU09OVHlwZScsXG4gICAgZGVzY3JpcHRpb246ICdFbnVtZXJhdGlvbiBvZiBhbGwgR2VvSlNPTiBvYmplY3QgdHlwZXMuJyxcbiAgICB2YWx1ZXM6IHtcbiAgICAgIFBvaW50OiB7IHZhbHVlOiAnUG9pbnQnIH0sXG4gICAgICBNdWx0aVBvaW50OiB7IHZhbHVlOiAnTXVsdGlQb2ludCcgfSxcbiAgICAgIExpbmVTdHJpbmc6IHsgdmFsdWU6ICdMaW5lU3RyaW5nJyB9LFxuICAgICAgTXVsdGlMaW5lU3RyaW5nOiB7IHZhbHVlOiAnTXVsdGlMaW5lU3RyaW5nJyB9LFxuICAgICAgUG9seWdvbjogeyB2YWx1ZTogJ1BvbHlnb24nIH0sXG4gICAgICBNdWx0aVBvbHlnb246IHsgdmFsdWU6ICdNdWx0aVBvbHlnb24nIH0sXG4gICAgICBHZW9tZXRyeUNvbGxlY3Rpb246IHsgdmFsdWU6ICdHZW9tZXRyeUNvbGxlY3Rpb24nIH0sXG4gICAgICBGZWF0dXJlOiB7IHZhbHVlOiAnRmVhdHVyZScgfSxcbiAgICAgIEZlYXR1cmVDb2xsZWN0aW9uOiB7IHZhbHVlOiAnRmVhdHVyZUNvbGxlY3Rpb24nIH0sXG4gICAgfSxcbiAgfSksXG5cbiAgQ29vcmRpbmF0ZXNTY2FsYXI6IG5ldyBTY2FsYXJUeXBlKHtcbiAgICBuYW1lOiAnR2VvSlNPTkNvb3JkaW5hdGVzJyxcbiAgICBkZXNjcmlwdGlvbjogJ0EgKG11bHRpZGltZW5zaW9uYWwpIHNldCBvZiBjb29yZGluYXRlcyBmb2xsb3dpbmcgeCwgeSwgeiBvcmRlci4nLFxuICAgIHNlcmlhbGl6ZTogY29lcmNlQ29vcmRpbmF0ZXMsXG4gICAgcGFyc2VWYWx1ZTogY29lcmNlQ29vcmRpbmF0ZXMsXG4gICAgcGFyc2VMaXRlcmFsOiBwYXJzZUNvb3JkaW5hdGVzLFxuICB9KSxcblxuICBKc29uU2NhbGFyOiBuZXcgU2NhbGFyVHlwZSh7XG4gICAgbmFtZTogJ0pTT05PYmplY3QnLFxuICAgIGRlc2NyaXB0aW9uOiAnQXJiaXRyYXJ5IEpTT04gdmFsdWUnLFxuICAgIHNlcmlhbGl6ZTogY29lcmNlT2JqZWN0LFxuICAgIHBhcnNlVmFsdWU6IGNvZXJjZU9iamVjdCxcbiAgICBwYXJzZUxpdGVyYWw6IHBhcnNlT2JqZWN0LFxuICB9KSxcblxuICBQb2ludE9iamVjdDogbmV3IE9iamVjdFR5cGUoe1xuICAgIG5hbWU6ICdHZW9KU09OUG9pbnQnLFxuICAgIGRlc2NyaXB0aW9uOiAnT2JqZWN0IGRlc2NyaWJpbmcgYSBzaW5nbGUgZ2VvZ3JhcGhpY2FsIHBvaW50LicsXG4gICAgaW50ZXJmYWNlczogKCkgPT4gW0dlb0pTT04uR2VvSlNPTkludGVyZmFjZSwgR2VvSlNPTi5HZW9tZXRyeUludGVyZmFjZV0sXG4gICAgZmllbGRzOiAoKSA9PiAoe1xuICAgICAgdHlwZTogeyB0eXBlOiBuZXcgTm9uTnVsbChHZW9KU09OLlR5cGVFbnVtKSB9LFxuICAgICAgY3JzOiB7IHR5cGU6IEdlb0pTT04uQ29vcmRpbmF0ZVJlZmVyZW5jZVN5c3RlbU9iamVjdCB9LFxuICAgICAgYmJveDogeyB0eXBlOiBuZXcgTGlzdChGbG9hdCkgfSxcbiAgICAgIGNvb3JkaW5hdGVzOiB7IHR5cGU6IEdlb0pTT04uQ29vcmRpbmF0ZXNTY2FsYXIgfSxcbiAgICB9KSxcbiAgfSksXG5cbiAgTXVsdGlQb2ludE9iamVjdDogbmV3IE9iamVjdFR5cGUoe1xuICAgIG5hbWU6ICdHZW9KU09OTXVsdGlQb2ludCcsXG4gICAgZGVzY3JpcHRpb246ICdPYmplY3QgZGVzY3JpYmluZyBtdWx0aXBsZSBnZW9ncmFwaGljYWwgcG9pbnRzLicsXG4gICAgaW50ZXJmYWNlczogKCkgPT4gW0dlb0pTT04uR2VvSlNPTkludGVyZmFjZSwgR2VvSlNPTi5HZW9tZXRyeUludGVyZmFjZV0sXG4gICAgZmllbGRzOiAoKSA9PiAoe1xuICAgICAgdHlwZTogeyB0eXBlOiBuZXcgTm9uTnVsbChHZW9KU09OLlR5cGVFbnVtKSB9LFxuICAgICAgY3JzOiB7IHR5cGU6IEdlb0pTT04uQ29vcmRpbmF0ZVJlZmVyZW5jZVN5c3RlbU9iamVjdCB9LFxuICAgICAgYmJveDogeyB0eXBlOiBuZXcgTGlzdChGbG9hdCkgfSxcbiAgICAgIGNvb3JkaW5hdGVzOiB7IHR5cGU6IEdlb0pTT04uQ29vcmRpbmF0ZXNTY2FsYXIgfSxcbiAgICB9KSxcbiAgfSksXG5cbiAgTGluZVN0cmluZ09iamVjdDogbmV3IE9iamVjdFR5cGUoe1xuICAgIG5hbWU6ICdHZW9KU09OTGluZVN0cmluZycsXG4gICAgZGVzY3JpcHRpb246ICdPYmplY3QgZGVzY3JpYmluZyBhIHNpbmdsZSBjb25uZWN0ZWQgc2VxdWVuY2Ugb2YgZ2VvZ3JhcGhpY2FsIHBvaW50cy4nLFxuICAgIGludGVyZmFjZXM6ICgpID0+IFtHZW9KU09OLkdlb0pTT05JbnRlcmZhY2UsIEdlb0pTT04uR2VvbWV0cnlJbnRlcmZhY2VdLFxuICAgIGZpZWxkczogKCkgPT4gKHtcbiAgICAgIHR5cGU6IHsgdHlwZTogbmV3IE5vbk51bGwoR2VvSlNPTi5UeXBlRW51bSkgfSxcbiAgICAgIGNyczogeyB0eXBlOiBHZW9KU09OLkNvb3JkaW5hdGVSZWZlcmVuY2VTeXN0ZW1PYmplY3QgfSxcbiAgICAgIGJib3g6IHsgdHlwZTogbmV3IExpc3QoRmxvYXQpIH0sXG4gICAgICBjb29yZGluYXRlczogeyB0eXBlOiBHZW9KU09OLkNvb3JkaW5hdGVzU2NhbGFyIH0sXG4gICAgfSksXG4gIH0pLFxuXG4gIE11bHRpTGluZVN0cmluZ09iamVjdDogbmV3IE9iamVjdFR5cGUoe1xuICAgIG5hbWU6ICdHZW9KU09OTXVsdGlMaW5lU3RyaW5nJyxcbiAgICBkZXNjcmlwdGlvbjogJ09iamVjdCBkZXNjcmliaW5nIG11bHRpcGxlIGNvbm5lY3RlZCBzZXF1ZW5jZXMgb2YgZ2VvZ3JhcGhpY2FsIHBvaW50cy4nLFxuICAgIGludGVyZmFjZXM6ICgpID0+IFtHZW9KU09OLkdlb0pTT05JbnRlcmZhY2UsIEdlb0pTT04uR2VvbWV0cnlJbnRlcmZhY2VdLFxuICAgIGZpZWxkczogKCkgPT4gKHtcbiAgICAgIHR5cGU6IHsgdHlwZTogbmV3IE5vbk51bGwoR2VvSlNPTi5UeXBlRW51bSkgfSxcbiAgICAgIGNyczogeyB0eXBlOiBHZW9KU09OLkNvb3JkaW5hdGVSZWZlcmVuY2VTeXN0ZW1PYmplY3QgfSxcbiAgICAgIGJib3g6IHsgdHlwZTogbmV3IExpc3QoRmxvYXQpIH0sXG4gICAgICBjb29yZGluYXRlczogeyB0eXBlOiBHZW9KU09OLkNvb3JkaW5hdGVzU2NhbGFyIH0sXG4gICAgfSksXG4gIH0pLFxuXG4gIFBvbHlnb25PYmplY3Q6IG5ldyBPYmplY3RUeXBlKHtcbiAgICBuYW1lOiAnR2VvSlNPTlBvbHlnb24nLFxuICAgIGRlc2NyaXB0aW9uOiAnT2JqZWN0IGRlc2NyaWJpbmcgYSBzaW5nbGUgc2hhcGUgZm9ybWVkIGJ5IGEgc2V0IG9mIGdlb2dyYXBoaWNhbCBwb2ludHMuJyxcbiAgICBpbnRlcmZhY2VzOiAoKSA9PiBbR2VvSlNPTi5HZW9KU09OSW50ZXJmYWNlLCBHZW9KU09OLkdlb21ldHJ5SW50ZXJmYWNlXSxcbiAgICBmaWVsZHM6ICgpID0+ICh7XG4gICAgICB0eXBlOiB7IHR5cGU6IG5ldyBOb25OdWxsKEdlb0pTT04uVHlwZUVudW0pIH0sXG4gICAgICBjcnM6IHsgdHlwZTogR2VvSlNPTi5Db29yZGluYXRlUmVmZXJlbmNlU3lzdGVtT2JqZWN0IH0sXG4gICAgICBiYm94OiB7IHR5cGU6IG5ldyBMaXN0KEZsb2F0KSB9LFxuICAgICAgY29vcmRpbmF0ZXM6IHsgdHlwZTogR2VvSlNPTi5Db29yZGluYXRlc1NjYWxhciB9LFxuICAgIH0pLFxuICB9KSxcblxuICBNdWx0aVBvbHlnb25PYmplY3Q6IG5ldyBPYmplY3RUeXBlKHtcbiAgICBuYW1lOiAnR2VvSlNPTk11bHRpUG9seWdvbicsXG4gICAgZGVzY3JpcHRpb246ICdPYmplY3QgZGVzY3JpYmluZyBtdWx0aXBsZSBzaGFwZXMgZm9ybWVkIGJ5IHNldHMgb2YgZ2VvZ3JhcGhpY2FsIHBvaW50cy4nLFxuICAgIGludGVyZmFjZXM6ICgpID0+IFtHZW9KU09OLkdlb0pTT05JbnRlcmZhY2UsIEdlb0pTT04uR2VvbWV0cnlJbnRlcmZhY2VdLFxuICAgIGZpZWxkczogKCkgPT4gKHtcbiAgICAgIHR5cGU6IHsgdHlwZTogbmV3IE5vbk51bGwoR2VvSlNPTi5UeXBlRW51bSkgfSxcbiAgICAgIGNyczogeyB0eXBlOiBHZW9KU09OLkNvb3JkaW5hdGVSZWZlcmVuY2VTeXN0ZW1PYmplY3QgfSxcbiAgICAgIGJib3g6IHsgdHlwZTogbmV3IExpc3QoRmxvYXQpIH0sXG4gICAgICBjb29yZGluYXRlczogeyB0eXBlOiBHZW9KU09OLkNvb3JkaW5hdGVzU2NhbGFyIH0sXG4gICAgfSksXG4gIH0pLFxuXG4gIEdlb21ldHJ5Q29sbGVjdGlvbk9iamVjdDogbmV3IE9iamVjdFR5cGUoe1xuICAgIG5hbWU6ICdHZW9KU09OR2VvbWV0cnlDb2xsZWN0aW9uJyxcbiAgICBkZXNjcmlwdGlvbjogJ0Egc2V0IG9mIG11bHRpcGxlIGdlb21ldHJpZXMsIHBvc3NpYmx5IG9mIHZhcmlvdXMgdHlwZXMuJyxcbiAgICBpbnRlcmZhY2VzOiAoKSA9PiBbR2VvSlNPTi5HZW9KU09OSW50ZXJmYWNlXSxcbiAgICBmaWVsZHM6ICgpID0+ICh7XG4gICAgICB0eXBlOiB7IHR5cGU6IG5ldyBOb25OdWxsKEdlb0pTT04uVHlwZUVudW0pIH0sXG4gICAgICBjcnM6IHsgdHlwZTogR2VvSlNPTi5Db29yZGluYXRlUmVmZXJlbmNlU3lzdGVtT2JqZWN0IH0sXG4gICAgICBiYm94OiB7IHR5cGU6IG5ldyBMaXN0KEZsb2F0KSB9LFxuICAgICAgZ2VvbWV0cmllczogeyB0eXBlOiBuZXcgTm9uTnVsbChuZXcgTGlzdChuZXcgTm9uTnVsbChHZW9KU09OLkdlb21ldHJ5SW50ZXJmYWNlKSkpIH0sXG4gICAgfSksXG4gIH0pLFxuXG4gIEZlYXR1cmVPYmplY3Q6IG5ldyBPYmplY3RUeXBlKHtcbiAgICBuYW1lOiAnR2VvSlNPTkZlYXR1cmUnLFxuICAgIGRlc2NyaXB0aW9uOiAnQW4gb2JqZWN0IHRoYXQgbGlua3MgYSBnZW9tZXRyeSB0byBwcm9wZXJ0aWVzIGluIG9yZGVyIHRvIHByb3ZpZGUgY29udGV4dC4nLFxuICAgIGludGVyZmFjZXM6ICgpID0+IFtHZW9KU09OLkdlb0pTT05JbnRlcmZhY2VdLFxuICAgIGZpZWxkczogKCkgPT4gKHtcbiAgICAgIHR5cGU6IHsgdHlwZTogbmV3IE5vbk51bGwoR2VvSlNPTi5UeXBlRW51bSkgfSxcbiAgICAgIGNyczogeyB0eXBlOiBHZW9KU09OLkNvb3JkaW5hdGVSZWZlcmVuY2VTeXN0ZW1PYmplY3QgfSxcbiAgICAgIGJib3g6IHsgdHlwZTogbmV3IExpc3QoRmxvYXQpIH0sXG4gICAgICBnZW9tZXRyeTogeyB0eXBlOiBHZW9KU09OLkdlb21ldHJ5SW50ZXJmYWNlIH0sXG4gICAgICBwcm9wZXJ0aWVzOiB7IHR5cGU6IEdlb0pTT04uSnNvblNjYWxhciB9LFxuICAgICAgaWQ6IHsgdHlwZTogU3RyIH0sXG4gICAgfSksXG4gIH0pLFxuXG4gIEZlYXR1cmVDb2xsZWN0aW9uT2JqZWN0OiBuZXcgT2JqZWN0VHlwZSh7XG4gICAgbmFtZTogJ0dlb0pTT05GZWF0dXJlQ29sbGVjdGlvbicsXG4gICAgZGVzY3JpcHRpb246ICdBIHNldCBvZiBtdWx0aXBsZSBmZWF0dXJlcy4nLFxuICAgIGludGVyZmFjZXM6ICgpID0+IFtHZW9KU09OLkdlb0pTT05JbnRlcmZhY2VdLFxuICAgIGZpZWxkczogKCkgPT4gKHtcbiAgICAgIC8vIGlkOiB7IHR5cGU6IFN0ciB9LFxuICAgICAgdHlwZTogeyB0eXBlOiBuZXcgTm9uTnVsbChHZW9KU09OLlR5cGVFbnVtKSB9LFxuICAgICAgY3JzOiB7IHR5cGU6IEdlb0pTT04uQ29vcmRpbmF0ZVJlZmVyZW5jZVN5c3RlbU9iamVjdCB9LFxuICAgICAgYmJveDogeyB0eXBlOiBuZXcgTGlzdChGbG9hdCkgfSxcbiAgICAgIGZlYXR1cmVzOiB7IHR5cGU6IG5ldyBOb25OdWxsKG5ldyBMaXN0KG5ldyBOb25OdWxsKEdlb0pTT04uRmVhdHVyZU9iamVjdCkpKSB9LFxuICAgIH0pLFxuICB9KSxcblxuICBDUlNUeXBlRW51bTogbmV3IEVudW1UeXBlKHtcbiAgICBuYW1lOiAnR2VvSlNPTkNSU1R5cGUnLFxuICAgIGRlc2NyaXB0aW9uOiAnRW51bWVyYXRpb24gb2YgYWxsIEdlb0pTT04gQ1JTIG9iamVjdCB0eXBlcy4nLFxuICAgIHZhbHVlczoge1xuICAgICAgbmFtZTogeyB2YWx1ZTogJ25hbWUnIH0sXG4gICAgICBsaW5rOiB7IHZhbHVlOiAnbGluaycgfSxcbiAgICB9LFxuICB9KSxcblxuICBOYW1lZENSU1Byb3BlcnRpZXNPYmplY3Q6IG5ldyBPYmplY3RUeXBlKHtcbiAgICBuYW1lOiAnR2VvSlNPTk5hbWVkQ1JTUHJvcGVydGllcycsXG4gICAgZGVzY3JpcHRpb246ICdQcm9wZXJ0aWVzIGZvciBuYW1lIGJhc2VkIENSUyBvYmplY3QuJyxcbiAgICBmaWVsZHM6ICgpID0+ICh7XG4gICAgICBuYW1lOiB7IHR5cGU6IG5ldyBOb25OdWxsKFN0cikgfSxcbiAgICB9KSxcbiAgfSksXG5cbiAgTGlua2VkQ1JTUHJvcGVydGllc09iamVjdDogbmV3IE9iamVjdFR5cGUoe1xuICAgIG5hbWU6ICdHZW9KU09OTGlua2VkQ1JTUHJvcGVydGllcycsXG4gICAgZGVzY3JpcHRpb246ICdQcm9wZXJ0aWVzIGZvciBsaW5rIGJhc2VkIENSUyBvYmplY3QuJyxcbiAgICBmaWVsZHM6ICgpID0+ICh7XG4gICAgICBocmVmOiB7IHR5cGU6IG5ldyBOb25OdWxsKFN0cikgfSxcbiAgICAgIHR5cGU6IHsgdHlwZTogU3RyIH0sXG4gICAgfSksXG4gIH0pLFxuXG4gIENSU1Byb3BlcnRpZXNVbmlvbjogbmV3IFVuaW9uVHlwZSh7XG4gICAgbmFtZTogJ0dlb0pTT05DUlNQcm9wZXJ0aWVzJyxcbiAgICBkZXNjcmlwdGlvbjogJ0NSUyBvYmplY3QgcHJvcGVydGllcy4nLFxuICAgIHR5cGVzOiAoKSA9PiBbR2VvSlNPTi5OYW1lZENSU1Byb3BlcnRpZXNPYmplY3QsIEdlb0pTT04uTGlua2VkQ1JTUHJvcGVydGllc09iamVjdF0sXG4gICAgcmVzb2x2ZVR5cGU6IHZhbHVlID0+IHtcbiAgICAgIGlmICh2YWx1ZS5uYW1lKSB7XG4gICAgICAgIHJldHVybiBHZW9KU09OLk5hbWVkQ1JTUHJvcGVydGllc09iamVjdDtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZS5ocmVmKSB7XG4gICAgICAgIHJldHVybiBHZW9KU09OLkxpbmtlZENSU1Byb3BlcnRpZXNPYmplY3Q7XG4gICAgICB9XG4gICAgfSxcbiAgfSksXG5cbiAgQ29vcmRpbmF0ZVJlZmVyZW5jZVN5c3RlbU9iamVjdDogbmV3IE9iamVjdFR5cGUoe1xuICAgIG5hbWU6ICdHZW9KU09OQ29vcmRpbmF0ZVJlZmVyZW5jZVN5c3RlbScsXG4gICAgZGVzY3JpcHRpb246ICdDb29yZGluYXRlIFJlZmVyZW5jZSBTeXN0ZW0gKENSUykgb2JqZWN0LicsXG4gICAgZmllbGRzOiAoKSA9PiAoe1xuICAgICAgdHlwZTogeyB0eXBlOiBuZXcgTm9uTnVsbChHZW9KU09OLkNSU1R5cGVFbnVtKSB9LFxuICAgICAgcHJvcGVydGllczogeyB0eXBlOiBuZXcgTm9uTnVsbChHZW9KU09OLkNSU1Byb3BlcnRpZXNVbmlvbikgfSxcbiAgICB9KSxcbiAgfSksXG5cbiAgR2VvSlNPTkludGVyZmFjZTogbmV3IEludGVyZmFjZVR5cGUoe1xuICAgIG5hbWU6ICdHZW9KU09OSW50ZXJmYWNlJyxcbiAgICBmaWVsZHM6ICgpID0+ICh7XG4gICAgICB0eXBlOiB7IHR5cGU6IG5ldyBOb25OdWxsKEdlb0pTT04uVHlwZUVudW0pIH0sXG4gICAgICBjcnM6IHsgdHlwZTogR2VvSlNPTi5Db29yZGluYXRlUmVmZXJlbmNlU3lzdGVtT2JqZWN0IH0sXG4gICAgICBiYm94OiB7IHR5cGU6IG5ldyBMaXN0KEZsb2F0KSB9LFxuICAgIH0pLFxuICAgIHJlc29sdmVUeXBlOiB2YWx1ZSA9PiBHZW9KU09OW2Ake3ZhbHVlLnR5cGV9T2JqZWN0YF0sXG4gIH0pLFxuXG4gIEdlb21ldHJ5SW50ZXJmYWNlOiBuZXcgSW50ZXJmYWNlVHlwZSh7XG4gICAgbmFtZTogJ0dlb0pTT05HZW9tZXRyeUludGVyZmFjZScsXG4gICAgZmllbGRzOiAoKSA9PiAoe1xuICAgICAgdHlwZTogeyB0eXBlOiBuZXcgTm9uTnVsbChHZW9KU09OLlR5cGVFbnVtKSB9LFxuICAgICAgY3JzOiB7IHR5cGU6IEdlb0pTT04uQ29vcmRpbmF0ZVJlZmVyZW5jZVN5c3RlbU9iamVjdCB9LFxuICAgICAgYmJveDogeyB0eXBlOiBuZXcgTGlzdChGbG9hdCkgfSxcbiAgICAgIGNvb3JkaW5hdGVzOiB7IHR5cGU6IEdlb0pTT04uQ29vcmRpbmF0ZXNTY2FsYXIgfSxcbiAgICB9KSxcbiAgICByZXNvbHZlVHlwZTogdmFsdWUgPT4gR2VvSlNPTltgJHt2YWx1ZS50eXBlfU9iamVjdGBdLm5hbWUsXG4gICAgLy8gcmVzb2x2ZVR5cGU6IHZhbHVlID0+IHZhbHVlLnR5cGUsXG4gIH0pLFxuXG4gIC8qKlxuICAgKiAgICAgbmFtZTogJ0dlb0pTT05UeXBlJyxcbiAgICBkZXNjcmlwdGlvbjogJ0VudW1lcmF0aW9uIG9mIGFsbCBHZW9KU09OIG9iamVjdCB0eXBlcy4nLFxuICAgIHZhbHVlczoge1xuICAgICAgUG9pbnQ6IHsgdmFsdWU6ICdQb2ludCcgfSxcbiAgICAgIE11bHRpUG9pbnQ6IHsgdmFsdWU6ICdNdWx0aVBvaW50JyB9LFxuICAgICAgTGluZVN0cmluZzogeyB2YWx1ZTogJ0xpbmVTdHJpbmcnIH0sXG4gICAgICBNdWx0aUxpbmVTdHJpbmc6IHsgdmFsdWU6ICdNdWx0aUxpbmVTdHJpbmcnIH0sXG4gICAgICBQb2x5Z29uOiB7IHZhbHVlOiAnUG9seWdvbicgfSxcbiAgICAgIE11bHRpUG9seWdvbjogeyB2YWx1ZTogJ011bHRpUG9seWdvbicgfSxcbiAgICAgIEdlb21ldHJ5Q29sbGVjdGlvbjogeyB2YWx1ZTogJ0dlb21ldHJ5Q29sbGVjdGlvbicgfSxcbiAgICAgIEZlYXR1cmU6IHsgdmFsdWU6ICdGZWF0dXJlJyB9LFxuICAgICAgRmVhdHVyZUNvbGxlY3Rpb246IHsgdmFsdWU6ICdGZWF0dXJlQ29sbGVjdGlvbicgfSxcbiAgICB9LFxuICB9KSxcbiAgICovXG4gIEdlb21ldHJ5VHlwZVVuaW9uOiBuZXcgVW5pb25UeXBlKHtcbiAgICBuYW1lOiAnR2VvSlNPTkdlb21ldHJ5VHlwZXMnLFxuICAgIGRlc2NyaXB0aW9uOiAnR2VvbWV0cnkgVHlwZXMnLFxuICAgIHR5cGVzOiAoKSA9PiBbXG4gICAgICBHZW9KU09OLlBvaW50T2JqZWN0LFxuICAgICAgR2VvSlNPTi5NdWx0aUxpbmVTdHJpbmdPYmplY3QsXG4gICAgICBHZW9KU09OLkxpbmVTdHJpbmdPYmplY3QsXG4gICAgICBHZW9KU09OLlBvbHlnb25PYmplY3QsXG4gICAgICBHZW9KU09OLk11bHRpUG9pbnRPYmplY3QsXG4gICAgICBHZW9KU09OLk11bHRpUG9seWdvbk9iamVjdCxcbiAgICBdLFxuICAgIHJlc29sdmVUeXBlOiB2YWx1ZSA9PiB7XG4gICAgICBpZiAodmFsdWUudmFsdWUgPT09IEdlb0pTT04uVHlwZUVudW0uUG9pbnQudmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIEdlb0pTT04uUG9pbnRPYmplY3QubmFtZTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZS52YWx1ZSA9PT0gR2VvSlNPTi5UeXBlRW51bS5NdWx0aUxpbmVTdHJpbmcudmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIEdlb0pTT04uTXVsdGlMaW5lU3RyaW5nT2JqZWN0Lm5hbWU7XG4gICAgICB9XG4gICAgICBpZiAodmFsdWUudmFsdWUgPT09IEdlb0pTT04uVHlwZUVudW0uTGluZVN0cmluZy52YWx1ZSkge1xuICAgICAgICByZXR1cm4gR2VvSlNPTi5MaW5lU3RyaW5nT2JqZWN0Lm5hbWU7XG4gICAgICB9XG4gICAgICBpZiAodmFsdWUudmFsdWUgPT09IEdlb0pTT04uVHlwZUVudW0uTXVsdGlQb2ludC52YWx1ZSkge1xuICAgICAgICByZXR1cm4gR2VvSlNPTi5NdWx0aVBvaW50T2JqZWN0Lm5hbWU7XG4gICAgICB9XG4gICAgICBpZiAodmFsdWUudmFsdWUgPT09IEdlb0pTT04uVHlwZUVudW0uUG9seWdvbi52YWx1ZSkge1xuICAgICAgICByZXR1cm4gR2VvSlNPTi5Qb2x5Z29uT2JqZWN0Lm5hbWU7XG4gICAgICB9XG4gICAgICBpZiAodmFsdWUudmFsdWUgPT09IEdlb0pTT04uVHlwZUVudW0uTXVsdGlQb2x5Z29uLnZhbHVlKSB7XG4gICAgICAgIHJldHVybiBHZW9KU09OLk11bHRpUG9seWdvbk9iamVjdC5uYW1lO1xuICAgICAgfVxuICAgICAgaWYgKHZhbHVlLnZhbHVlID09PSBHZW9KU09OLlR5cGVFbnVtLk11bHRpUG9pbnQudmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIEdlb0pTT04uTXVsdGlQb2ludE9iamVjdC5uYW1lO1xuICAgICAgfVxuICAgIH0sXG4gIH0pLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgR2VvSlNPTjtcbiJdfQ==